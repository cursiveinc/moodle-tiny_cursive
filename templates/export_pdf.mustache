{{!
This file is part of Moodle - http://moodle.org/

Moodle is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Moodle is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Moodle. If not, see
<http: //www.gnu.org/licenses />.
}}
{{!
@template tiny_cursive/export_pdf

Template to generate a PDF export of student writing analytics and submission content.
Displays student info, writing statistics, and submission text with paste analysis.

Example context (json):
{
    "fullname": "John Smith",
    "modulename": "Essay Assignment 1", 
    "date": "2023-12-01",
    "analytics": {
        "effort": 95,
        "total_time_seconds": 3600,
        "words_per_minute": 30,
        "word_count": 500,
        "backspace_percent": 8
    },
    "pastecount": 2,
    "comments": [
        {
            "usercomment": "Pasted from research notes"
        }
    ],
    "submitted": "Essay content with <span class=\"tiny_cursive_added\">pasted text</span>",
    "reportdate": "2023-12-01 15:30"
}
}}

<div class="tiny_cursive-container">
    <!-- Main Header -->
    <div class="tiny_cursive-header">
        <h2>{{#str}}report_title, tiny_cursive{{/str}}</h2>
        <h6>{{#str}}report_sub_title, tiny_cursive{{/str}}</h6>
    </div>

    <!-- Student Info Box -->
    <div class="tiny_cursive-info-box">
        <div class="tiny_cursive-info-row">
            <!-- Student Name -->
            <div class="tiny_cursive-info-col">
                <h5>{{#str}}student_name, tiny_cursive{{/str}}:</h5>
                <div>{{fullname}}</div>
            </div>

            <!-- Assignment -->
            <div class="tiny_cursive-info-col">
                <h5>{{#str}}assignment, tiny_cursive{{/str}}:</h5>
                <div>{{modulename}}</div>
            </div>

            <!-- Report Date -->
            <div class="tiny_cursive-info-col">
                <h5>{{#str}}report_date, tiny_cursive{{/str}}:</h5>
                <div>{{date}}</div>
            </div>

            <div class="tiny_cursive-info-col">
                <h5>{{#str}}submission_date, tiny_cursive{{/str}}:</h5>
                <div>{{sub_date}}</div>
            </div>
        </div>
    </div>

    <hr class="tiny_cursive-section-divider">

    <div class="tiny_cursive-section-box">

        <div class="tiny_cursive-section-title">
            <h3>{{#pix}} bar, tiny_cursive {{/pix}}Writing Analytics</h3>
        </div>

        <div class="tiny_cursive-verified-badge"
            style="background-color: {{#auth_state}}#28a745{{/auth_state}}{{^auth_state}}gray{{/auth_state}}">
            {{#str}}authorship, tiny_cursive{{/str}}: {{#auth_state}}{{#str}}verified, tiny_cursive{{/str}}
            {{/auth_state}}{{^auth_state}}{{#str}}verified!, tiny_cursive{{/str}}{{/auth_state}}
        </div>

        <div class="tiny_cursive-stats-container-loop">

            {{#analytics}}
            <div class="tiny_cursive-stats-card">
                <p class="title">{{#str}}character_verify, tiny_cursive{{/str}}</p>
                <h2>{{analytics.effort}}%</h2>
                <p class="desc">{{#str}}effort_ratio_desc, tiny_cursive {{/str}}</p>
            </div>

            <div class="tiny_cursive-stats-card">
                <p class="title">{{#str}}time_writing, tiny_cursive {{/str}}</p>
                <h2>{{analytics.total_time_seconds}}</h2>
                <p class="desc">{{#str}}time_writing_desc, tiny_cursive {{/str}}</p>
            </div>


            <div class="tiny_cursive-stats-card">
                <p class="title">{{#str}}words_per_minute, tiny_cursive {{/str}}</p>
                <h2>{{analytics.words_per_minute}} WPM</h2>
                <p class="desc">{{#str}}words_per_minute_desc, tiny_cursive {{/str}}</p>
            </div>

            <div class="tiny_cursive-stats-card">
                <p class="title">{{#str}}total_words, tiny_cursive {{/str}}</p>
                <h2>{{analytics.word_count}}</h2>
                <p class="desc">{{#str}}total_words_desc, tiny_cursive {{/str}}</p>
            </div>

            <div class="tiny_cursive-stats-card">
                <p class="title">{{#str}}backspace, tiny_cursive {{/str}}</p>
                <h2>{{analytics.backspace_percent}}%</h2>
                <p class="desc">{{#str}}backspace_desc, tiny_cursive {{/str}}</p>
            </div>
            {{/analytics}}
        </div>
    </div>



    <div class="tiny_cursive-page-break"></div>

    <div class="tiny_cursive-section-box" style="margin: 15px 0;">
        <div class="tiny_cursive-section-title">
            <h3>{{#pix}} editdoc, tiny_cursive {{/pix}}{{#str}}submission_content, tiny_cursive {{/str}}</h3>
        </div>

        <div class="tiny_cursive-analysis-card">
            <h4>{{#str}}paste_analysis, tiny_cursive {{/str}}</h4>
            <p><strong>{{#str}}pastecount, tiny_cursive {{/str}}:</strong> {{pastecount}}</p>
            <p><strong>{{#str}}comments, tiny_cursive {{/str}}:</strong> {{^comments}}None{{/comments}}
                {{#comments}}
            <p class="tiny_cursive-comments">{{usercomment}}</p>
            {{/comments}}
            </p>
        </div>


        <div class="tiny_cursive-legend tiny_cursive-export-pdf">
            <strong>{{#str}}legend, tiny_cursive {{/str}}: </strong>
            <span class="tiny_cursive_added"></span>
            <span>{{#str}}editspastesai, tiny_cursive {{/str}}</span>
        </div>

        <div class="tiny_cursive-submission-box">
            <h2>{{#str}}fullsubmission, tiny_cursive {{/str}}:</h2>
            <div class="tiny_cursive-export-pdf">
                {{{submitted}}}
            </div>
        </div>
    </div>

    <div class="tiny_cursive-footer">
        <div>
            {{#str}}report_gen, tiny_cursive {{/str}}: {{reportdate}}
        </div>
    </div>
</div>
