define("tiny_cursive/cursive_writing_reports",["core/ajax","core/str","core/templates","./replay","./analytic_button","./analytic_events"],(function(AJAX,str,templates,Replay,analyticButton,AnalyticEvents){const replayInstances={};window.video_playback=function(mid,filepath){if(""!==filepath){const replay=new Replay("content"+mid,filepath,10,!1,"player_"+mid);replayInstances[mid]=replay}else templates.render("tiny_cursive/no_submission").then((html=>{document.getElementById("content"+mid).innerHTML=html})).catch((e=>window.console.error(e)));return!1};var usersTable={init:function(page){str.get_strings([{key:"field_require",component:"tiny_cursive"}]).done((function(){usersTable.getusers(page)}));let myEvents=new AnalyticEvents;!async function(){try{!function(score_setting){document.querySelectorAll(".analytic-modal").forEach((modalElement=>{var mid=modalElement.dataset.id,filepath=modalElement.dataset.filepath;let context={};context.userid=mid;let cmid=modalElement.dataset.cmid,analyticBtn=analyticButton(mid);analyticBtn&&(modalElement.innerHTML="",modalElement.appendChild(analyticBtn)),AJAX.call([{methodname:"cursive_get_writing_statistics",args:{cmid:cmid,fileid:mid}}])[0].done((response=>{let data=JSON.parse(response.data);context.formattime=myEvents.formatedTime(data),context.tabledata=data;let authIcon=myEvents.authorshipStatus(data.first_file,data.score,score_setting);myEvents.createModal(mid,context,"",authIcon),myEvents.analytics(mid,templates,context,"",replayInstances,authIcon),myEvents.checkDiff(mid,mid,"",replayInstances),myEvents.replyWriting(mid,filepath,"",replayInstances)})).fail((error=>{throw new Error("Error: "+error.message)}))}))}(await str.get_string("confidence_threshold","tiny_cursive"))}catch(error){window.console.error("Error fetching string:",error)}}()},getusers:function(page){document.getElementById("id_coursename").addEventListener("change",(function(){var courseid=this.value;AJAX.call([{methodname:"cursive_get_user_list",args:{courseid:courseid}}])[0].done((function(json){var context={tabledata:JSON.parse(json),page:page};templates.render("tiny_cursive/user_list",context).then((function(html){document.getElementById("id_username").innerHTML=html}))})),AJAX.call([{methodname:"cursive_get_module_list",args:{courseid:courseid}}])[0].done((function(json){var context={tabledata:JSON.parse(json),page:page};templates.render("tiny_cursive/module_list",context).then((function(html){document.getElementById("id_modulename").innerHTML=html}))}))}))}};return usersTable}));

//# sourceMappingURL=cursive_writing_reports.min.js.map