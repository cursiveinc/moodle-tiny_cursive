define("tiny_cursive/cursive_writing_reports",["jquery","core/ajax","core/str","core/templates","./replay","./analytic_button","./analytic_events"],(function($,AJAX,str,templates,Replay,analyticButton,AnalyticEvents){const replayInstances={};window.video_playback=function(mid,filepath){if(""!==filepath){const replay=new Replay("content"+mid,filepath,10,!1,"player_"+mid);replayInstances[mid]=replay}else templates.render("tiny_cursive/no_submission").then((html=>{$("#content"+mid).html(html)})).catch((e=>window.console.error(e)));return!1};var usersTable={init:function(page){str.get_strings([{key:"field_require",component:"tiny_cursive"}]).done((function(){usersTable.getusers(page)}));let myEvents=new AnalyticEvents;!async function(){try{!function(scoreSetting){$(".analytic-modal").each((function(){var mid=$(this).data("id"),filepath=$(this).data("filepath");let context={};context.userid=mid;let cmid=$(this).data("cmid");$(this).html(analyticButton($(this).data("id"))),AJAX.call([{methodname:"cursive_get_writing_statistics",args:{cmid:cmid,fileid:mid}}])[0].done((response=>{let data=JSON.parse(response.data);context.formattime=myEvents.formatedTime(data),context.tabledata=data;let authIcon=myEvents.authorshipStatus(data.first_file,data.score,scoreSetting);myEvents.createModal(mid,context,"",authIcon),myEvents.analytics(mid,templates,context,"",replayInstances,authIcon),myEvents.checkDiff(mid,mid,"",replayInstances),myEvents.replyWriting(mid,filepath,"",replayInstances),myEvents.quality(mid,templates,context,"",replayInstances,cmid)})).fail((error=>{throw new Error("Error: "+error.message)}))}))}(await str.get_string("confidence_threshold","tiny_cursive"))}catch(error){window.console.error("Error fetching string:",error)}}()},getusers:function(page){$("#id_coursename").change((function(){var courseid=$(this).val();AJAX.call([{methodname:"cursive_get_user_list",args:{courseid:courseid}}])[0].done((function(json){var context={tabledata:JSON.parse(json),page:page};templates.render("tiny_cursive/user_list",context).then((function(html){return $("#id_username").html(html),!0}))})),AJAX.call([{methodname:"cursive_get_module_list",args:{courseid:courseid}}])[0].done((function(json){var context={tabledata:JSON.parse(json),page:page};templates.render("tiny_cursive/module_list",context).then((function(html){return $("#id_modulename").html(html),!0}))}))}))}};return usersTable}));

//# sourceMappingURL=cursive_writing_reports.min.js.map