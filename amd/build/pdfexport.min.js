define("tiny_cursive/pdfexport",["exports","core/templates","jquery","core/modal","core/modal_factory","core/modal_events","core/str"],(function(_exports,_templates,_jquery,_modal,_modal_factory,_modal_events,str){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * TODO describe module pdfexport
   *
   * @module     tiny_cursive/pdfexport
   * @copyright  2025 Cursive Technology, Inc. <info@cursivetechnology.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=_interopRequireDefault(_templates),_jquery=_interopRequireDefault(_jquery),_modal=_interopRequireDefault(_modal),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),str=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(str);_exports.init=data=>{var _document$getElementB;data&&(data=JSON.parse((null===(_document$getElementB=document.getElementById("CursiveStudentData"))||void 0===_document$getElementB?void 0:_document$getElementB.dataset.submission)||"{}"));Object.keys(data).length?(0,_jquery.default)((function(){let option={margin:[10,6,10,6],filename:data.filename,image:{type:"jpeg",quality:1},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};_templates.default.render("tiny_cursive/export_pdf",data).then((html=>{html2pdf().set(option).from(html).save().then((()=>{str.get_string("download_pdf_message","tiny_cursive").then((str=>{document.getElementById("loadermessage").textContent=str})),setTimeout((()=>{document.getElementById("pdfexportLoader").remove(),window.history.back()}),4e3)}))})).catch((e=>window.console.error(e)))})):_modal.default.create({type:_modal_factory.default.types.ALERT,title:str.get_string("message","tool_dataprivacy"),body:str.get_string("nopaylod","tiny_cursive"),cssClass:"modal-dialog modal-dialog-centered"}).then((modal=>{modal.show(),modal.getRoot().on(_modal_events.default.hidden,(()=>{window.history.back()}))}))}}));

//# sourceMappingURL=pdfexport.min.js.map