define("tiny_cursive/append_oublogs_post",["exports","jquery","core/ajax","core/templates","./analytic_events","./analytic_button","./replay"],(function(_exports,_jquery,_ajax,_templates,_analytic_events,_analytic_button,_replay){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * This module provides functionality to append blog posts in the OU Blogs plugin for TinyMCE editor
   *
   * @module     tiny_cursive/append_oublogs_post
   * @copyright  2025  CTI <info@cursivetechnology.com>
   * @author     Brain Station 23 <sales@brainstation-23.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_templates=_interopRequireDefault(_templates),_analytic_events=_interopRequireDefault(_analytic_events),_analytic_button=_interopRequireDefault(_analytic_button),_replay=_interopRequireDefault(_replay);_exports.init=scoreSetting=>{const replayInstances={};window.video_playback=function(mid,filepath){if(""!==filepath){const replay=new _replay.default("content"+mid,filepath,10,!1,"player_"+mid);replayInstances[mid]=replay}else _templates.default.render("tiny_cursive/no_submission").then((html=>((0,_jquery.default)("#content"+mid).html(html),!0))).catch((e=>window.console.error(e)));return!1};const ouBlogPosts=(0,_jquery.default)(".oublog-post"),cmid=M.cfg.contextInstanceId;ouBlogPosts.each((function(){var Element=(0,_jquery.default)(this),postedByLink=Element.find(".oublog-postedby a").attr("href"),permalink=Element.find(".oublog-post-links a").attr("href"),resourceId=parseInt(new URLSearchParams(permalink.split("?")[1]).get("post")),userid=parseInt(new URLSearchParams(postedByLink.split("?")[1]).get("id")),filepath="";if(userid&&resourceId){let args={id:userid,resourceid:resourceId,modulename:"oublog",cmid:cmid},methodname="cursive_get_oublog_submission_data",com=(0,_ajax.call)([{methodname:methodname,args:args}]);com[0].done((function(json){var data=JSON.parse(json);data.res.filename&&(filepath=data.res.filename),Element.find(".oublog-post-links").append((0,_analytic_button.default)(userid));let myEvents=new _analytic_events.default;var context={tabledata:data.res,formattime:myEvents.formatedTime(data.res),page:scoreSetting,userid:userid};let authIcon=myEvents.authorshipStatus(data.res.first_file,data.res.score,scoreSetting);myEvents.createModal(userid,context,"",authIcon),myEvents.analytics(userid,_templates.default,context,"",replayInstances,authIcon),myEvents.checkDiff(userid,data.res.file_id,"",replayInstances),myEvents.replyWriting(userid,filepath,"",replayInstances),myEvents.quality(userid,_templates.default,context,"",replayInstances,cmid)})),com[0].fail((error=>{window.console.error(error)}))}}))}}));

//# sourceMappingURL=append_oublogs_post.min.js.map