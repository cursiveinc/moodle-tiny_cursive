define("tiny_cursive/show_url_in_submission_grade",["core/ajax","core/str","core/templates","./replay","./analytic_button","./analytic_events"],(function(AJAX,str,templates,Replay,analyticButton,AnalyticEvents){const replayInstances={};window.video_playback=function(mid,filepath){if(""!==filepath){const replay=new Replay("content"+mid,filepath,10,!1,"player_"+mid);replayInstances[mid]=replay}else templates.render("tiny_cursive/no_submission").then((html=>{const contentElement=document.getElementById("content"+mid);contentElement&&(contentElement.innerHTML=html)})).catch((e=>window.console.error(e)));return!1};var usersTable={init:function(score_setting,showcomment,hasApiKey){const graderElement=document.getElementById("page-mod-assign-grader");graderElement&&graderElement.classList.add("tiny_cursive_mod_assign_grader"),str.get_strings([{key:"field_require",component:"tiny_cursive"}]).then((()=>{usersTable.appendSubmissionDetail(score_setting,showcomment,hasApiKey)}))},appendSubmissionDetail:function(score_setting,showcomment,hasApiKey){const divElement=document.querySelector('.path-mod-assign [data-region="grade-panel"]');let previousContextId=window.location.href;new MutationObserver((function(mutations){mutations.forEach((function(){let currentContextId=window.location.href;currentContextId!==previousContextId&&(window.location.reload(),previousContextId=currentContextId)}))})).observe(divElement,{childList:!0,subtree:!0});const subUrl=window.location.href,parm=new URL(subUrl),userid=parm.searchParams.get("userid");var cmid=parm.searchParams.get("id");const args={id:userid,modulename:"assign",cmid:cmid},com=AJAX.call([{methodname:"cursive_get_assign_grade_comment",args:args}]);return com[0].done((function(json){const data=JSON.parse(json);let filepath="";data.data.filename&&(filepath=data.data.filename);const analytic_button_div=document.createElement("div");analytic_button_div.classList.add("text-center","mt-2"),analytic_button_div.appendChild(analyticButton(hasApiKey?data.data.effort_ratio:"",userid));const gradeActions=document.querySelector('div[data-region="grade-actions"]');gradeActions.parentNode.insertBefore(analytic_button_div,gradeActions);const reviewPanel=document.querySelector('div[data-region="review-panel"]');reviewPanel&&reviewPanel.classList.add("cursive_review_panel_path_mod_assign");const gradingNavigationPanel=document.querySelector('div[data-region="grading-navigation-panel"]');gradingNavigationPanel&&gradingNavigationPanel.classList.add("cursive_grading-navigation-panel_path_mod_assign");const gradePanel=document.querySelector('div[data-region="grade-panel"]');gradePanel&&gradePanel.classList.add("cursive_grade-panel_path_mod_assign");const gradeActionsPanel=document.querySelector('div[data-region="grade-actions-panel"]');gradeActionsPanel&&gradeActionsPanel.classList.add("cursive_grade-actions-panel_path_mod_assign");const myEvents=new AnalyticEvents,context={tabledata:data.data,formattime:myEvents.formatedTime(data.data),page:score_setting,userid:userid,apikey:hasApiKey},authIcon=myEvents.authorshipStatus(data.data.first_file,data.data.score,score_setting);myEvents.createModal(userid,context,"",replayInstances,authIcon),myEvents.analytics(userid,templates,context,"",replayInstances,authIcon),myEvents.checkDiff(userid,data.data.file_id,"",replayInstances),myEvents.replyWriting(userid,filepath,"",replayInstances)})),com.usercomment}};return usersTable}));

//# sourceMappingURL=show_url_in_submission_grade.min.js.map