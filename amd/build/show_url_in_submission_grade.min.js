define("tiny_cursive/show_url_in_submission_grade",["jquery","core/ajax","core/str","core/templates","./replay","./analytic_button","./analytic_events","./replay_button","./replay_modal"],(function($,AJAX,str,templates,Replay,analyticButton,AnalyticEvents,replayButton,replayModal){const replayInstances={};window.video_playback=function(mid,filepath){if(""!==filepath){const replay=new Replay("content"+mid,filepath,10,!1,"player_"+mid);replayInstances[mid]=replay}else templates.render("tiny_cursive/no_submission").then((html=>{$("#content"+mid).html(html)})).catch((e=>window.console.error(e)));return!1};var usersTable={init:function(scoreSetting,showcomment,hasApiKey){$(document).ready((function(){$("#page-mod-assign-grader").addClass("tiny_cursive_mod_assign_grader")})),str.get_strings([{key:"field_require",component:"tiny_cursive"}]).done((function(){usersTable.appendSubmissionDetail(scoreSetting,showcomment,hasApiKey)}))},appendSubmissionDetail:function(scoreSetting,showcomment,hasApiKey){$(document).ready((function($){var divElement=$('.path-mod-assign [data-region="grade-panel"]')[0],previousContextId=window.location.href;new MutationObserver((function(mutations){mutations.forEach((function(){var currentContextId=window.location.href;currentContextId!==previousContextId&&(window.location.reload(),previousContextId=currentContextId)}))})).observe(divElement,{childList:!0,subtree:!0});let subUrl=window.location.href,parm=new URL(subUrl),userid=parm.searchParams.get("userid");var cmid=parm.searchParams.get("id");let args={id:userid,modulename:"assign",cmid:cmid},com=AJAX.call([{methodname:"cursive_get_assign_grade_comment",args:args}]);return com[0].done((function(json){var data=JSON.parse(json),filepath="";data.data.filename&&(filepath=data.data.filename);let analyticButtonDiv=document.createElement("div");if(analyticButtonDiv.classList.add("text-center","mt-2"),$('div[data-region="grade-actions"]').before(analyticButtonDiv),$('div[data-region="review-panel"]').addClass("cursive_review_panel_path_mod_assign"),$('div[data-region="grading-navigation-panel"]').addClass("cursive_grading-navigation-panel_path_mod_assign"),$('div[data-region="grade-panel"]').addClass("cursive_grade-panel_path_mod_assign"),$('div[data-region="grade-actions-panel"]').addClass("cursive_grade-actions-panel_path_mod_assign"),!hasApiKey)return $(analyticButtonDiv).html(replayButton(userid)),void $(document).off("click","#replay"+userid).on("click","#replay"+userid,(function(e){e.preventDefault();const context={mid:userid};replayModal.create({templateContext:context}).then((modal=>(modal.show(),window.video_playback(userid,filepath),modal))).catch((error=>{window.console.error("Failed to create replay modal:",error)}))}));analyticButtonDiv.append(analyticButton(hasApiKey?data.data.effort_ratio:"",userid));let myEvents=new AnalyticEvents;var context={tabledata:data.data,formattime:myEvents.formatedTime(data.data),page:scoreSetting,userid:userid,apikey:hasApiKey};let authIcon=myEvents.authorshipStatus(data.data.first_file,data.data.score,scoreSetting);myEvents.createModal(userid,context,"",replayInstances,authIcon),myEvents.analytics(userid,templates,context,"",replayInstances,authIcon),myEvents.checkDiff(userid,data.data.file_id,"",replayInstances),myEvents.replyWriting(userid,filepath,"",replayInstances)})),com.usercomment}))}};return usersTable}));

//# sourceMappingURL=show_url_in_submission_grade.min.js.map