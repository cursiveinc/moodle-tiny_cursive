define("tiny_cursive/show_url_in_submission_grade",["core/ajax","core/str","core/templates","./replay","./analytic_button","./analytic_events"],(function(AJAX,str,templates,Replay,analyticButton,AnalyticEvents){const replayInstances={};window.video_playback=function(mid,filepath){if(""!==filepath){const replay=new Replay("content"+mid,filepath,10,!1,"player_"+mid);replayInstances[mid]=replay}else templates.render("tiny_cursive/no_submission").then((html=>{const contentElement=document.getElementById("content"+mid);contentElement&&(contentElement.innerHTML=html)})).catch((e=>window.console.error(e)));return!1};var usersTable={init:function(score_setting,showcomment){const graderElement=document.getElementById("page-mod-assign-grader");graderElement&&graderElement.classList.add("tiny_cursive_mod_assign_grader"),str.get_strings([{key:"field_require",component:"tiny_cursive"}]).then((()=>{usersTable.appendSubmissionDetail(score_setting,showcomment)}))},appendSubmissionDetail:function(score_setting,showcomment){const divElement=document.querySelector('.path-mod-assign [data-region="grade-panel"]');let previousContextId=window.location.href;new MutationObserver((function(mutations){mutations.forEach((function(){let currentContextId=window.location.href;currentContextId!==previousContextId&&(window.location.reload(),previousContextId=currentContextId)}))})).observe(divElement,{childList:!0,subtree:!0});const sub_url=window.location.href,parm=new URL(sub_url),userid=parm.searchParams.get("userid");var cmid=parm.searchParams.get("id");const args={id:userid,modulename:"assign",cmid:cmid},com=AJAX.call([{methodname:"cursive_get_assign_grade_comment",args:args}]);return com[0].done((function(json){const data=JSON.parse(json);let filepath="";if(data.data.filename&&(filepath=data.data.filename),"comments"!==data.usercomment&&parseInt(showcomment)){const container=document.createElement("div"),row=document.createElement("div");row.classList.add("row");const chatbox=document.createElement("div");chatbox.classList.add("tiny_cursive-chatbox","tiny_cursive-chatbox22","tiny_cursive-chatbox--tray");const chatboxTitle=document.createElement("div");chatboxTitle.classList.add("tiny_cursive-chatbox__title");const titleH5=document.createElement("h5");titleH5.classList.add("text-white"),titleH5.textContent="References",chatboxTitle.appendChild(titleH5);const cbody=document.createElement("div");cbody.classList.add("tiny_cursive-chatbox__body"),chatbox.appendChild(chatboxTitle),chatbox.appendChild(cbody),row.appendChild(chatbox),container.appendChild(row);const gradeActionsPanel=document.querySelector('div[data-region="grade-actions-panel"]');gradeActionsPanel.parentNode.insertBefore(container,gradeActionsPanel);const chatboxTitleClose=document.querySelector(".tiny_cursive-chatbox__title__close");chatboxTitle.addEventListener("click",(function(){chatbox.classList.toggle("tiny_cursive-chatbox--tray")})),chatboxTitleClose&&chatboxTitleClose.addEventListener("click",(function(e){e.stopPropagation(),chatbox.classList.add("tiny_cursive-chatbox--closed")})),chatbox.addEventListener("transitionend",(function(){chatbox.classList.contains("tiny_cursive-chatbox--closed")&&chatbox.remove()}));const gradePanel=document.querySelector('div[data-region="grade-panel"]');if(gradePanel){const dropdownDiv=document.createElement("div");dropdownDiv.classList.add("dropdown"),gradePanel.appendChild(dropdownDiv)}data.usercomment.forEach((element=>{const commentDiv=document.createElement("div");commentDiv.classList.add("border","p-2","shadow-sm"),commentDiv.textContent=element.usercomment,cbody.appendChild(commentDiv)}))}const analytic_button_div=document.createElement("div");analytic_button_div.classList.add("text-center","mt-2"),analytic_button_div.appendChild(analyticButton(userid));const gradeActions=document.querySelector('div[data-region="grade-actions"]');gradeActions.parentNode.insertBefore(analytic_button_div,gradeActions);const reviewPanel=document.querySelector('div[data-region="review-panel"]');reviewPanel&&reviewPanel.classList.add("cursive_review_panel_path_mod_assign");const gradingNavigationPanel=document.querySelector('div[data-region="grading-navigation-panel"]');gradingNavigationPanel&&gradingNavigationPanel.classList.add("cursive_grading-navigation-panel_path_mod_assign");const gradePanel=document.querySelector('div[data-region="grade-panel"]');gradePanel&&gradePanel.classList.add("cursive_grade-panel_path_mod_assign");const gradeActionsPanel=document.querySelector('div[data-region="grade-actions-panel"]');gradeActionsPanel&&gradeActionsPanel.classList.add("cursive_grade-actions-panel_path_mod_assign");const myEvents=new AnalyticEvents,context={tabledata:data.data,formattime:myEvents.formatedTime(data.data),page:score_setting,userid:userid},authIcon=myEvents.authorshipStatus(data.data.first_file,data.data.score,score_setting);myEvents.createModal(userid,context,"",authIcon),myEvents.analytics(userid,templates,context,"",replayInstances,authIcon),myEvents.checkDiff(userid,data.data.file_id,"",replayInstances),myEvents.replyWriting(userid,filepath,"",replayInstances)})),com.usercomment}};return usersTable}));

//# sourceMappingURL=show_url_in_submission_grade.min.js.map