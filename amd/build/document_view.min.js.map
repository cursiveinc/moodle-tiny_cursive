{"version":3,"file":"document_view.min.js","sources":["../src/document_view.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This module provides functionality for document view management in the Tiny editor,\n * including full page mode display and sidebar information\n * @module     tiny_cursive/document_view\n * @copyright  2025 Cursive Technology, Inc. <info@cursivetechnology.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Icons from 'tiny_cursive/svg_repo';\nexport default class DocumentView {\n\n    constructor(User, Rubrics, submission, modulename) {\n        this.User = User;\n        this.Rubrics = Rubrics;\n        this.submission = submission;\n        this.module = modulename;\n    }\n\n    normalMode() {\n        if (this.module === 'assign') {\n            document.getElementById('tiny_cursive-fullpage-custom-header')?.remove();\n            document.getElementById('cursive-fullpagemode-sidebar')?.remove();\n\n            let current = document.querySelector('#id_onlinetext_editor_ifr');\n            let p1 = current.parentElement;\n            let p2 = p1.parentElement;\n\n            p2.style.backgroundColor = '';\n            current.style.width = '';\n            current.style.minWidth = '';\n            current.style.boxShadow = '';\n            Object.assign(p1.style, {\n                display: '',\n                justifyContent: '',\n                outline: '',\n                margin: ''\n            });\n            p1.classList.remove('tiny-cursive-editor-container');\n            p2.style.position = '';\n            let iframeBody = current.contentDocument?.body || current.contentWindow?.document?.body;\n            if (iframeBody) {\n                iframeBody.style.padding = '0';\n            }\n            document.head.querySelector('#tiny_cursive-fullpage-mode-style')?.remove();\n        }\n\n    }\n\n    fullPageMode() {\n        if (this.module === 'assign') {\n            let current = document.querySelector('#id_onlinetext_editor_ifr');\n            let p1 = current.parentElement;\n            let p2 = p1.parentElement;\n            let p3 = p2.parentElement;\n            let p4 = p3.parentElement;\n\n            let statusBar = document.querySelector('.tox-statusbar__right-container > button');\n            let assignName = document.querySelector('.page-context-header');\n            assignName.classList.remove('mb-2');\n\n            let header = this.create('div');\n            header.id = 'tiny_cursive-fullpage-custom-header';\n            header.style.backgroundColor = 'white';\n            header.style.display = 'flex';\n            header.style.justifyContent = 'space-between';\n\n            let btn = this.create('input');\n            btn.className = 'tiny_cursive-fullpage-submit-btn';\n            btn.value = 'Save changes';\n            btn.type = 'submit';\n            btn.style.margin = '.5rem';\n\n            const leftSide = this.create('div');\n            leftSide.style.display = 'flex';\n            leftSide.style.alignItems = 'center';\n            leftSide.style.margin = '0 1rem';\n\n            const rightSide = this.create('div');\n            rightSide.style.display = 'flex';\n            rightSide.style.alignItems = 'center';\n            rightSide.style.margin = '0 1rem';\n            rightSide.id = 'tiny_cursive-fullpage-right-wrapper';\n\n            rightSide.appendChild(btn);\n            leftSide.appendChild(assignName.cloneNode(true));\n\n\n            header.appendChild(leftSide);\n            header.appendChild(rightSide);\n\n            p4.insertBefore(header, p4.firstChild);\n            p2.style.backgroundColor = '#efefef';\n            current.style.width = '750px';\n            current.style.minWidth = '750px';\n            current.style.boxShadow = '0 10px 15px -3px rgb(0 0 0/0.1),0 4px 6px -4px rgb(0 0 0/0.1)';\n            Object.assign(p1.style, {\n                display: 'flex',\n                justifyContent: 'center',\n                outline: 'none',\n                margin: '2rem 0 0'\n            });\n            const style = this.create('style');\n            style.id = 'tiny_cursive-fullpage-mode-style';\n            style.textContent = `\n        .tox.tox-edit-focus .tox-edit-area::before {\n            opacity: 0;\n        }\n        `;\n            document.head.appendChild(style);\n\n            let iframeBody = current.contentDocument?.body || current.contentWindow?.document?.body;\n\n            if (iframeBody) {\n                iframeBody.style.padding = '0.5in';\n            }\n            p2.style.position = 'relative';\n            document.getElementById('cursive-fullpagemode-sidebar')?.remove();\n            p2.appendChild(this.docSideBar(statusBar));\n        }\n    }\n\n    docSideBar(status) {\n\n        const container = this.create('div');\n        container.id = 'cursive-fullpagemode-sidebar';\n        container.className = 'bg-white h-100 shadow';\n        container.style.width = '300px';\n        container.style.overflow = 'auto';\n\n        const header = this.create('div');\n        header.className = 'border-bottom p-4';\n        header.style.position = 'sticky';\n        header.style.top = '0';\n        header.style.backgroundColor = 'white';\n\n        const headerTitle = this.create('h3');\n        headerTitle.className = 'mb-1';\n        headerTitle.textContent = 'Assignment Details';\n        headerTitle.style.fontWeight = '600';\n\n        let wordCount = this.wordCounter(status);\n\n        header.append(headerTitle, wordCount);\n\n        const content = this.create('div');\n        content.className = 'p-3';\n\n        let courseName = document.querySelector('#page-navbar > nav > ol > li:nth-child(1) > a');\n        let courseDes = document.querySelector('#intro');\n        let Dates = document.querySelector('.activity-dates');\n\n        let openDate = Dates.querySelector('div:nth-child(1)');\n        let dueDate = Dates.querySelector('div:nth-child(2)');\n\n        content.append(\n            this.createBox({\n                bg: 'bg-info',\n                titleColor: 'text-info',\n                icon: Icons.people,\n                title: 'Student Information',\n                bodyHTML: this.generateStudentInfo(this.User, courseName)\n            })\n        );\n\n\n        if (courseDes.textContent.trim() !== '') {\n            content.append(\n                this.createBox({\n                    bg: 'bg-gray',\n                    titleColor: 'text-dark',\n                    icon: Icons.assignment,\n                    title: 'Assignment Description',\n                    bodyHTML: courseDes.innerHTML\n                })\n            );\n        }\n        if (Object.keys(this.Rubrics).length) {\n            content.append(\n                this.createBox({\n                    bg: 'bg-gray',\n                    titleColor: 'text-dark',\n                    icon: Icons.assignment,\n                    title: 'Assessment Rubrics',\n                    bodyHTML: this.generateRubrics(this.Rubrics)\n                })\n            );\n        }\n\n        content.append(\n            this.createBox({\n                bg: 'bg-amber',\n                titleColor: 'text-dark',\n                icon: Icons.time,\n                title: 'Important Dates',\n                bodyHTML: this.generateImportantDates(openDate, dueDate)\n            })\n        );\n\n        content.append(\n            this.createBox({\n                bg: 'bg-green',\n                titleColor: 'text-success',\n                icon: Icons.assignment,\n                title: 'Submission Status',\n                bodyHTML: this.submissionStatus(this.submission)\n            })\n        );\n\n        container.append(header, content);\n        return container;\n\n    }\n    // Helper to create info boxes\n    createBox({bg, titleColor, icon, title, bodyHTML}) {\n        const box = this.create('div');\n        box.className = `tiny_cursive-fullpage-card ${bg}`;\n\n        const heading = this.create('h4');\n        heading.className = `tiny_cursive-fullpage-card-header ${titleColor}  mb-2 d-flex align-items-center`;\n        heading.innerHTML = `${icon} ${title}`;\n\n        const body = this.create('div');\n        body.className = `tiny_cursive-fullpage-card-body`;\n        body.innerHTML = bodyHTML;\n\n        box.append(heading, body);\n        return box;\n    }\n\n    generateRubrics(Rubrics) {\n        const wrapper = this.create('div');\n\n        Rubrics.forEach(rubric => {\n            const rubricDiv = this.create('div');\n            rubricDiv.className = 'tiny_cursive-rubric-card';\n\n            const title = this.create('h3');\n            title.className = 'tiny_cursive-rubric-title';\n            title.textContent = rubric.description;\n            rubricDiv.appendChild(title);\n\n            Object.values(rubric.levels).forEach(level => {\n                const levelDiv = this.create('div');\n                const score = Number(level.score);\n\n                // Assign background color class based on score\n                if (score === 0) {\n                    levelDiv.className = 'tiny_cursive-rubric-level tiny_cursive-rubric-low';\n                } else if (score <= 2) {\n                    levelDiv.className = 'tiny_cursive-rubric-level tiny_cursive-rubric-mid';\n                } else {\n                    levelDiv.className = 'tiny_cursive-rubric-level tiny_cursive-rubric-high';\n                }\n\n                levelDiv.textContent = `${level.definition} / ${level.score}`;\n                rubricDiv.appendChild(levelDiv);\n            });\n\n            wrapper.appendChild(rubricDiv);\n        });\n\n        return wrapper.innerHTML;\n    }\n\n    submissionStatus(submission) {\n        const wrapper = this.create('div');\n\n        const statusWrapper = this.create('div');\n        statusWrapper.className = 'tiny_cursive-status-row';\n\n        const statusName = this.create('span');\n        statusName.textContent = 'Status: ';\n\n        const statusValue = this.create('span');\n        const isNew = submission.current.status === 'new';\n        statusValue.textContent = isNew ? 'Draft (Not submitted)' : 'Draft (Submitted)';\n        statusValue.className = `tiny_cursive-status-value ${isNew ? 'tiny_cursive-status-red' : 'tiny_cursive-status-green'}`;\n\n        statusWrapper.append(statusName, statusValue);\n\n        const modifiedWrapper = this.create('div');\n        modifiedWrapper.className = 'tiny_cursive-status-row';\n\n        const modifiedName = this.create('span');\n        modifiedName.textContent = 'Last Modified: ';\n        const modifiedValue = this.create('span');\n        if (submission.current?.timemodified) {\n            const date = new Date(submission.current.timemodified * 1000);\n            modifiedValue.textContent = this.formatDate(date);\n        } else {\n            modifiedValue.textContent = 'N/A';\n        }\n        modifiedWrapper.append(modifiedName, modifiedValue);\n\n        const gradeWrapper = this.create('div');\n        gradeWrapper.className = 'tiny_cursive-status-row';\n\n        const gradeName = this.create('span');\n        gradeName.textContent = 'Grading Status: ';\n\n        const gradeValue = this.create('span');\n\n        if (submission.grade) {\n            gradeValue.textContent = Number(submission.grade.grade) > 0\n                ? submission.grade.grade\n                : 'Not graded';\n        } else {\n            gradeValue.textContent = 'Not graded';\n        }\n\n        gradeWrapper.append(gradeName, gradeValue);\n\n        wrapper.append(statusWrapper, gradeWrapper, modifiedWrapper);\n        return wrapper.innerHTML;\n    }\n\n    wordCounter(status) {\n        const wordCount = this.create('div');\n        wordCount.className = 'tiny_cursive-word-counter';\n        wordCount.textContent = '0 words';\n\n        const observer = new MutationObserver(() => {\n            const newText = status.textContent.trim();\n            wordCount.textContent = `${newText}`;\n        });\n        observer.observe(status, {\n            characterData: true,\n            subtree: true,\n            childList: true\n        });\n\n        return wordCount;\n    }\n\n\n    generateStudentInfo(user, course) {\n\n        const wrapper = this.create('div');\n\n        const nameWrapper = this.create('div');\n        const usernameWrapper = this.create('div');\n        const courseWrapper = this.create('div');\n\n        const nameLabel = this.create('span');\n        const nameValue = this.create('span');\n        const usernameLabel = this.create('span');\n        const usernameValue = this.create('span');\n        const courseLabel = this.create('span');\n        const courseValue = this.create('span');\n\n        nameLabel.textContent = 'Name: ';\n        nameValue.textContent = user.fullname;\n\n        usernameLabel.textContent = 'Username: ';\n        usernameValue.textContent = user.username;\n\n        courseLabel.textContent = 'Course: ';\n        courseValue.textContent = course.title;\n\n        nameWrapper.className = 'd-flex justify-content-between';\n        usernameWrapper.className = 'd-flex justify-content-between';\n        courseWrapper.className = 'd-flex justify-content-between';\n\n        nameWrapper.append(nameLabel, nameValue);\n        usernameWrapper.append(usernameLabel, usernameValue);\n        courseWrapper.append(courseLabel, courseValue);\n\n        wrapper.append(nameWrapper, usernameWrapper, courseWrapper);\n\n        return wrapper.innerHTML;\n\n    }\n\n    generateImportantDates(open, due) {\n\n        const wrapper = this.create('div');\n\n        const openedWrapper = this.create('div');\n        const dueWrapper = this.create('div');\n        const remainingWrapper = this.create('div');\n\n        const openedLabel = this.create('span');\n        const openedValue = this.create('span');\n        const dueLabel = this.create('span');\n        const dueValue = this.create('span');\n        const remainingLabel = this.create('span');\n        const remainingValue = this.create('span');\n\n        openedLabel.textContent = 'Opened: ';\n        openedValue.textContent = this.formatDate(new Date(open.textContent.replace(\"Opened:\", \"\").trim()));\n        openedValue.className = 'text-dark';\n\n        dueLabel.textContent = 'Due: ';\n        dueValue.textContent = this.formatDate(new Date(due.textContent.replace(\"Due:\", \"\").trim()));\n        dueValue.className = 'text-danger';\n\n        remainingLabel.textContent = 'Remaining: ';\n        remainingValue.textContent = this.calculateDate(due.textContent.replace(\"Due:\", \"\").trim());\n        remainingValue.className = 'text-danger';\n\n        openedWrapper.className = 'd-flex justify-content-between';\n        dueWrapper.className = 'd-flex justify-content-between';\n        remainingWrapper.className = 'd-flex align-items-center justify-content-between mt-2 pt-2 border-top';\n\n        openedWrapper.append(openedLabel, openedValue);\n        dueWrapper.append(dueLabel, dueValue);\n        remainingWrapper.append(remainingLabel, remainingValue);\n\n        wrapper.append(openedWrapper, dueWrapper, remainingWrapper);\n\n        return wrapper.innerHTML;\n    }\n\n    formatDate(date) {\n        let options = {year: 'numeric', month: 'short', day: 'numeric', hour: 'numeric', minute: 'numeric', hour12: true};\n        return date.toLocaleString('en-US', options);\n    }\n\n    calculateDate(date) {\n        const date1 = new Date(date); // Due date (local time)\n        const now = new Date(); // Current date/time\n\n        // Calculate the difference in milliseconds\n        const diffMs = date1 - now;\n\n        // Convert to days, hours, minutes\n        if (diffMs <= 0) {\n            return \"Overdue\";\n        } else {\n            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n            const diffHours = Math.floor((diffMs / (1000 * 60 * 60)) % 24);\n\n            return `${diffDays} days, ${diffHours} hours`;\n        }\n\n    }\n\n    create(tag) {\n        return document.createElement(tag);\n    }\n\n}"],"names":["constructor","User","Rubrics","submission","modulename","module","normalMode","this","document","getElementById","remove","current","querySelector","p1","parentElement","p2","style","backgroundColor","width","minWidth","boxShadow","Object","assign","display","justifyContent","outline","margin","classList","position","iframeBody","contentDocument","body","contentWindow","_current$contentWindo","_current$contentWindo2","padding","head","fullPageMode","p4","statusBar","assignName","header","create","id","btn","className","value","type","leftSide","alignItems","rightSide","appendChild","cloneNode","insertBefore","firstChild","textContent","_current$contentWindo3","_current$contentWindo4","docSideBar","status","container","overflow","top","headerTitle","fontWeight","wordCount","wordCounter","append","content","courseName","courseDes","Dates","openDate","dueDate","createBox","bg","titleColor","icon","Icons","people","title","bodyHTML","generateStudentInfo","trim","assignment","innerHTML","keys","length","generateRubrics","time","generateImportantDates","submissionStatus","box","heading","wrapper","forEach","rubric","rubricDiv","description","values","levels","level","levelDiv","score","Number","definition","statusWrapper","statusName","statusValue","isNew","modifiedWrapper","modifiedName","modifiedValue","_submission$current","timemodified","date","Date","formatDate","gradeWrapper","gradeName","gradeValue","grade","MutationObserver","newText","observe","characterData","subtree","childList","user","course","nameWrapper","usernameWrapper","courseWrapper","nameLabel","nameValue","usernameLabel","usernameValue","courseLabel","courseValue","fullname","username","open","due","openedWrapper","dueWrapper","remainingWrapper","openedLabel","openedValue","dueLabel","dueValue","remainingLabel","remainingValue","replace","calculateDate","toLocaleString","year","month","day","hour","minute","hour12","diffMs","Math","floor","tag","createElement"],"mappings":"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"}