{"version":3,"file":"document_view.min.js","sources":["../src/document_view.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This module provides functionality for document view management in the Tiny editor,\n * including full page mode display and sidebar information\n * @module     tiny_cursive/document_view\n * @copyright  2025 Cursive Technology, Inc. <info@cursivetechnology.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Icons from 'tiny_cursive/svg_repo';\nexport default class DocumentView {\n\n    constructor(User, Rubrics, submission, modulename, editor, quizInfo) {\n        this.User = User;\n        this.Rubrics = Rubrics;\n        this.submission = submission;\n        this.module = modulename;\n        this.editor = editor;\n        this.moduleIcon = Icons.assignment;\n        this.quizInfo = quizInfo;\n    }\n\n    normalMode() {\n        let id = this.editor?.id + \"_ifr\";\n        if (this.module === 'assign') {\n            this.normalizePage(id);\n        } else if (this.module === 'quiz') {\n            this.normalizePage(id);\n        } else if (this.module === 'forum') {\n            this.normalizePage(id);\n        } else if (this.module === 'lesson') {\n            this.normalizePage(id);\n        } else if (this.module === 'oublog') {\n            this.normalizePage(id);\n        }\n    }\n\n    fullPageMode() {\n\n        if (this.module === 'assign') {\n            this.moduleIcon = Icons.assignment;\n            this.fullPageModule(this.editor?.id);\n        } else if (this.module === 'forum') {\n            this.moduleIcon = Icons.forum;\n            this.fullPageModule(this.editor?.id);\n        } else if (this.module === 'quiz' && this.editor?.id) {\n            this.moduleIcon = Icons.quiz;\n            this.fullPageModule(this.editor?.id);\n        } else if (this.module === 'lesson') {\n            this.moduleIcon = Icons.lesson;\n            this.fullPageModule(this.editor?.id);\n        } else if (this.module === 'oublog') {\n            this.fullPageModule(this.editor?.id);\n        }\n    }\n\n    docSideBar(status) {\n\n        let url = new URL(window.location.href);\n        let replyId = url.searchParams.get(\"reply\");\n        let toggle = document.querySelector('#cursive-fullpagemode-sidebar-toggle');\n        let timelimitBlock = this.getTimerBlock(this.module);\n        let headerInfo = this.getSidebarTitle();\n        let progressBar = document.querySelector('.box.progress_bar');\n\n        const container = this.create('div');\n        container.id = 'cursive-fullpagemode-sidebar';\n        container.className = 'bg-white h-100 shadow';\n        container.style.width = '300px';\n        container.style.overflow = 'auto';\n\n        let crossBtn = this.create('span');\n        crossBtn.className = 'btn p-2';\n        crossBtn.innerHTML = Icons.close;\n        crossBtn.id = 'cursive-collapse-sidebar';\n\n        crossBtn.addEventListener('click', () => {\n            container.style.transition = 'width 0.3s ease';\n            container.style.width = '0';\n            toggle.style.display = 'flex';\n        });\n        toggle?.addEventListener('click', function () {\n            toggle.style.display = 'none';\n            container.style.width = '300px';\n        });\n\n        let btnWrapper = this.create('div');\n        btnWrapper.style.padding = '0 1rem';\n        btnWrapper.style.position = 'sticky';\n        btnWrapper.style.top = '0';\n        btnWrapper.style.backgroundColor = 'white';\n        btnWrapper.append(crossBtn);\n\n\n        const header = this.create('div');\n        header.className = 'border-bottom p-3 bg-light';\n        header.style.position = 'sticky';\n        header.style.top = '0';\n\n        const headerTitle = this.create('h3');\n        headerTitle.className = 'mb-3 d-flex align-items-center';\n        headerTitle.textContent = `${headerInfo.title} details`;\n        headerTitle.style.fontWeight = '600';\n\n        headerTitle.prepend(document.querySelector('.page-header-image > div').cloneNode(true));\n\n        let wordCount = this.wordCounter(status);\n\n        if (timelimitBlock && timelimitBlock?.textContent) {\n            let timer = this.timerCountDown(timelimitBlock);\n            header.append(headerTitle, wordCount, timer);\n        } else {\n            header.append(headerTitle, wordCount);\n        }\n\n\n        const content = this.create('div');\n        content.className = 'p-3';\n\n        let courseName = document.querySelector('#page-navbar > nav > ol > li:nth-child(1) > a');\n        let courseDes = document.querySelector('#intro');\n        let Dates = document.querySelector('.activity-dates');\n        let openDate, dueDate = null;\n\n        if (Dates) {\n            openDate = Dates.querySelector('div:nth-child(1)');\n            dueDate = Dates.querySelector('div:nth-child(2)');\n        }\n        if (this.module === 'forum') {\n            this.checkForumSubject();\n        }\n        content.append(\n            this.createBox({\n                bg: 'bg-info',\n                titleColor: 'text-info',\n                icon: Icons.people,\n                title: 'Student Information',\n                bodyHTML: this.generateStudentInfo(this.User, courseName)\n            })\n        );\n\n        if (this.module === 'lesson' && progressBar) {\n            content.append(\n                this.createBox({\n                    bg: 'bg-gray',\n                    titleColor: 'text-dark',\n                    icon: this.moduleIcon,\n                    title: 'Progress',\n                    bodyHTML: progressBar.innerHTML\n                })\n            );\n        }\n\n        if (courseDes && courseDes?.textContent.trim() !== '') {\n            content.append(\n                this.createBox({\n                    bg: 'bg-gray',\n                    titleColor: 'text-dark',\n                    icon: this.moduleIcon,\n                    title: `${this.getSidebarTitle().title} Description`,\n                    bodyHTML: courseDes.innerHTML\n                })\n            );\n        }\n\n        if (this.module === 'forum' && replyId) {\n            let replyPost = document.querySelector(`#post-content-${replyId}`);\n            if (replyPost?.textContent.trim()) {\n                content.append(\n                    this.createBox({\n                        bg: 'bg-gray',\n                        titleColor: 'text-dark',\n                        icon: this.moduleIcon,\n                        title: 'Replying to Post',\n                        bodyHTML: replyPost.textContent.trim()\n                    })\n                );\n            }\n        }\n\n        if (this.module === 'quiz' && this.editor?.id) {\n            let questionId = this.getQuestionId(this.editor?.id);\n            let question = document.querySelector(`#question-${questionId} .qtext`);\n            let intro = atob(this.quizInfo.intro);\n            if (question?.textContent.trim()) {\n                content.append(\n                    this.createBox({\n                        bg: 'bg-amber',\n                        titleColor: 'text-dark',\n                        icon: this.moduleIcon,\n                        title: 'Answering to question',\n                        bodyHTML: question.textContent\n                    })\n                );\n            }\n\n            if (intro && intro.trim() !== '') {\n                content.append(\n                    this.createBox({\n                        bg: 'bg-gray',\n                        titleColor: 'text-dark',\n                        icon: this.moduleIcon,\n                        title: 'Quiz Description',\n                        bodyHTML: intro\n                    })\n                );\n            }\n\n            if (Number(this.quizInfo.open)) {\n                content.append(\n                    this.createBox({\n                        bg: 'bg-amber',\n                        titleColor: 'text-dark',\n                        icon: Icons.time,\n                        title: 'Important Dates',\n                        bodyHTML: this.generateImportantDates(Number(this.quizInfo.open), Number(this.quizInfo.close))\n                    })\n                );\n            }\n        }\n\n        if (Object.keys(this.Rubrics).length) {\n            content.append(\n                this.createBox({\n                    bg: 'bg-gray',\n                    titleColor: 'text-dark',\n                    icon: this.moduleIcon,\n                    title: 'Assessment Rubrics',\n                    bodyHTML: this.generateRubrics(this.Rubrics)\n                })\n            );\n        }\n\n        if (Dates) {\n            content.append(\n                this.createBox({\n                    bg: 'bg-amber',\n                    titleColor: 'text-dark',\n                    icon: Icons.time,\n                    title: 'Important Dates',\n                    bodyHTML: this.generateImportantDates(openDate, dueDate)\n                })\n            );\n        }\n        if (this.module === 'assign') {\n            content.append(\n                this.createBox({\n                    bg: 'bg-green',\n                    titleColor: 'text-success',\n                    icon: this.moduleIcon,\n                    title: 'Submission Status',\n                    bodyHTML: this.submissionStatus(this.submission)\n                })\n            );\n        }\n\n        container.append(btnWrapper, header, content);\n        return container;\n\n    }\n    // Helper to create info boxes\n    createBox({ bg, titleColor, icon, title, bodyHTML }) {\n        const box = this.create('div');\n        box.className = `tiny_cursive-fullpage-card ${bg}`;\n\n        const heading = this.create('h4');\n        heading.className = `tiny_cursive-fullpage-card-header ${titleColor} d-flex align-items-center`;\n        heading.innerHTML = `${icon} ${title}`;\n\n        const body = this.create('div');\n        body.className = `tiny_cursive-fullpage-card-body`;\n        body.innerHTML = bodyHTML;\n\n        box.append(heading, body);\n        return box;\n    }\n\n    generateRubrics(Rubrics) {\n        const wrapper = this.create('div');\n\n        Rubrics.forEach(rubric => {\n            const rubricDiv = this.create('div');\n            rubricDiv.className = 'tiny_cursive-rubric-card';\n\n            const title = this.create('h3');\n            title.className = 'tiny_cursive-rubric-title';\n            title.textContent = rubric.description;\n            rubricDiv.appendChild(title);\n\n            Object.values(rubric.levels).forEach(level => {\n                const levelDiv = this.create('div');\n                const score = Number(level.score);\n\n                // Assign background color class based on score\n                if (score === 0) {\n                    levelDiv.className = 'tiny_cursive-rubric-level tiny_cursive-rubric-low';\n                } else if (score <= 2) {\n                    levelDiv.className = 'tiny_cursive-rubric-level tiny_cursive-rubric-mid';\n                } else {\n                    levelDiv.className = 'tiny_cursive-rubric-level tiny_cursive-rubric-high';\n                }\n\n                levelDiv.textContent = `${level.definition} / ${level.score}`;\n                rubricDiv.appendChild(levelDiv);\n            });\n\n            wrapper.appendChild(rubricDiv);\n        });\n\n        return wrapper.innerHTML;\n    }\n\n    submissionStatus(submission) {\n        const wrapper = this.create('div');\n\n        const statusWrapper = this.create('div');\n        statusWrapper.className = 'tiny_cursive-status-row';\n\n        const statusName = this.create('span');\n        statusName.textContent = 'Status: ';\n\n        const statusValue = this.create('span');\n        const isNew = submission?.current?.status === 'new';\n        statusValue.textContent = isNew ? 'Draft (Not submitted)' : 'Draft (Submitted)';\n        statusValue.className = `tiny_cursive-status-value ${isNew ? 'tiny_cursive-status-red' : 'tiny_cursive-status-green'}`;\n\n        statusWrapper.append(statusName, statusValue);\n\n        const modifiedWrapper = this.create('div');\n        modifiedWrapper.className = 'tiny_cursive-status-row';\n\n        const modifiedName = this.create('span');\n        modifiedName.textContent = 'Last Modified: ';\n        const modifiedValue = this.create('span');\n        if (submission?.current?.timemodified) {\n            const date = new Date(submission.current.timemodified * 1000);\n            modifiedValue.textContent = this.formatDate(date);\n        } else {\n            modifiedValue.textContent = 'N/A';\n        }\n        modifiedWrapper.append(modifiedName, modifiedValue);\n\n        const gradeWrapper = this.create('div');\n        gradeWrapper.className = 'tiny_cursive-status-row';\n\n        const gradeName = this.create('span');\n        gradeName.textContent = 'Grading Status: ';\n\n        const gradeValue = this.create('span');\n\n        if (submission?.grade) {\n            gradeValue.textContent = Number(submission.grade.grade) > 0\n                ? submission.grade.grade\n                : 'Not graded';\n        } else {\n            gradeValue.textContent = 'Not graded';\n        }\n\n        gradeWrapper.append(gradeName, gradeValue);\n\n        wrapper.append(statusWrapper, gradeWrapper, modifiedWrapper);\n        return wrapper.innerHTML;\n    }\n\n    wordCounter(status) {\n        const wordCount = this.create('div');\n        wordCount.className = 'bg-white rounded shadow-sm p-2 d-flex justify-content-between my-2';\n\n        const labelDiv = this.create('div');\n        const label = this.create('span');\n        const value = this.create('span');\n        const icon = this.create('span');\n        icon.className = 'me-2';\n        icon.innerHTML = Icons.assignment;\n\n        labelDiv.appendChild(icon);\n        labelDiv.append(label);\n\n        label.textContent = 'Word Count: ';\n        value.textContent = '0';\n        value.className = 'text-primary';\n        value.style.fontWeight = '600';\n        value.style.fontSize = '14px';\n\n        wordCount.append(labelDiv, value);\n        wordCount.style.fontSize = '12px';\n\n        const observer = new MutationObserver(() => {\n            const newText = status.textContent.trim();\n            value.textContent = `${newText.replace('words', '')}`;\n        });\n\n        observer.observe(status, {\n            characterData: true,\n            subtree: true,\n            childList: true\n        });\n\n        return wordCount;\n    }\n\n\n    timerCountDown(timer) {\n\n        let warningDiv = document.querySelector('#user-notifications > div');\n        if (warningDiv) {\n            let clone = warningDiv.cloneNode(true);\n            clone.querySelector('button')?.remove();\n            this.editor.notificationManager.open({\n                text: clone.textContent,\n                type: 'error'\n            });\n        }\n\n\n        const timerCount = this.create('div');\n        timerCount.className = 'bg-white rounded shadow-sm p-2 d-flex justify-content-between my-2';\n\n        const labelDiv = this.create('div');\n        const label = this.create('span');\n        const value = this.create('span');\n        const icon = this.create('span');\n        icon.innerHTML = Icons.time;\n\n        labelDiv.appendChild(icon);\n        labelDiv.append(label);\n\n        label.textContent = 'Time Left: ';\n        value.textContent = '00:00:00';\n        value.className = warningDiv ? 'text-danger' : 'text-primary';\n        value.style.fontWeight = '600';\n        value.style.fontSize = '14px';\n\n        timerCount.append(labelDiv, value);\n        timerCount.style.fontSize = '12px';\n        if (timer) {\n            const observer = new MutationObserver(() => {\n                const newText = timer.textContent.trim();\n                value.textContent = `${newText}`;\n            });\n            observer.observe(timer, {\n                characterData: true,\n                subtree: true,\n                childList: true\n            });\n        } else {\n            value.textContent = `No limit`;\n        }\n\n\n        return timerCount;\n    }\n\n\n    generateStudentInfo(user, course) {\n\n        const wrapper = this.create('div');\n\n        const nameWrapper = this.create('div');\n        const usernameWrapper = this.create('div');\n        const courseWrapper = this.create('div');\n\n        const nameLabel = this.create('span');\n        const nameValue = this.create('span');\n        const usernameLabel = this.create('span');\n        const usernameValue = this.create('span');\n        const courseLabel = this.create('span');\n        const courseValue = this.create('span');\n\n        nameLabel.textContent = 'Name: ';\n        nameValue.textContent = user.fullname;\n\n        usernameLabel.textContent = 'Username: ';\n        usernameValue.textContent = user.username;\n\n        courseLabel.textContent = 'Course: ';\n        courseValue.textContent = course.title;\n\n        nameWrapper.className = 'd-flex justify-content-between';\n        usernameWrapper.className = 'd-flex justify-content-between';\n        courseWrapper.className = 'd-flex justify-content-between';\n\n        nameWrapper.append(nameLabel, nameValue);\n        usernameWrapper.append(usernameLabel, usernameValue);\n        courseWrapper.append(courseLabel, courseValue);\n\n        wrapper.append(nameWrapper, usernameWrapper, courseWrapper);\n\n        return wrapper.innerHTML;\n\n    }\n\n    generateImportantDates(open, due) {\n\n        const wrapper = this.create('div');\n        let openDate = null;\n        let dueDate = null;\n\n        const openedWrapper = this.create('div');\n        const dueWrapper = this.create('div');\n        const remainingWrapper = this.create('div');\n\n        const openedLabel = this.create('span');\n        const openedValue = this.create('span');\n        const dueLabel = this.create('span');\n        const dueValue = this.create('span');\n        const remainingLabel = this.create('span');\n        const remainingValue = this.create('span');\n        if (this.module === 'quiz') {\n            openDate = open * 1000;\n            dueDate = due * 1000;\n        } else {\n            openDate = this.extractDate(open?.textContent);\n            dueDate = this.extractDate(due?.textContent);\n        }\n\n        openedLabel.textContent = 'Opened: ';\n        openedValue.textContent = this.formatDate(openDate ? new Date(openDate) : null);\n        openedValue.className = 'text-dark';\n\n        dueLabel.textContent = 'Due: ';\n        dueValue.textContent = this.formatDate(dueDate ? new Date(dueDate) : null);\n        dueValue.className = 'text-danger';\n\n        remainingLabel.textContent = 'Remaining: ';\n        remainingValue.textContent = this.calculateDate(dueDate);\n        remainingValue.className = 'text-danger';\n\n        openedWrapper.className = 'd-flex justify-content-between';\n        dueWrapper.className = 'd-flex justify-content-between';\n        remainingWrapper.className = 'd-flex align-items-center justify-content-between mt-2 pt-2 border-top';\n\n        openedWrapper.append(openedLabel, openedValue);\n        dueWrapper.append(dueLabel, dueValue);\n        remainingWrapper.append(remainingLabel, remainingValue);\n\n        wrapper.append(openedWrapper, dueWrapper, remainingWrapper);\n\n        return wrapper.innerHTML;\n    }\n\n    formatDate(date) {\n        if (!date) {\n            return '-';\n        }\n\n        let options = { year: 'numeric', month: 'short', day: 'numeric', hour: 'numeric', minute: 'numeric', hour12: true };\n        return date.toLocaleString('en-US', options);\n    }\n\n    extractDate(text) {\n        if (!text) {\n            return '-';\n        }\n        // Split on first colon and return the right part\n        const parts = text?.split(':');\n        if (parts.length > 1) {\n            return parts.slice(1).join(':').trim();\n        }\n\n        return text.trim(); // fallback\n    }\n\n\n    calculateDate(date) {\n        if (!date) {\n            return '-';\n        }\n        const date1 = new Date(date); // Due date (local time)\n        const now = new Date(); // Current date/time\n\n        // Calculate the difference in milliseconds\n        const diffMs = date1 - now;\n\n        // Convert to days, hours, minutes\n        if (diffMs <= 0) {\n            return \"Overdue\";\n        } else {\n            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n            const diffHours = Math.floor((diffMs / (1000 * 60 * 60)) % 24);\n\n            return `${diffDays} days, ${diffHours} hours`;\n        }\n\n    }\n\n    fullPageModule(module) {\n        let current = this.module === 'quiz' ?\n            document.getElementById(`${module}_ifr`) : document.querySelector(`#${module}_ifr`);\n\n        let p1 = current.parentElement;\n        let p2 = p1.parentElement;\n        let p3 = p2.parentElement;\n        let p4 = p3.parentElement;\n\n        let statusBar = document.querySelector('.tox-statusbar__right-container > button');\n        let assignName = document.querySelector('.page-context-header');\n        assignName.classList.remove('mb-2');\n\n        let header = this.create('div');\n        header.id = 'tiny_cursive-fullpage-custom-header';\n        header.style.backgroundColor = 'white';\n        header.style.display = 'flex';\n        header.style.justifyContent = 'space-between';\n        let btn = null;\n\n        if (this.module === 'quiz') {\n            btn = document.querySelector('#mod_quiz-next-nav').cloneNode(true);\n            btn.className = 'tiny_cursive-fullpage-submit-btn';\n            btn.style.margin = '.5rem';\n        } else {\n            btn = this.create('input');\n            btn.className = 'tiny_cursive-fullpage-submit-btn';\n            btn.value = 'Save changes';\n            btn.type = 'submit';\n            btn.style.margin = '.5rem';\n        }\n\n\n        const leftSide = this.create('div');\n        leftSide.style.display = 'flex';\n        leftSide.style.alignItems = 'center';\n        leftSide.style.margin = '0 1rem';\n\n        const rightSide = this.create('div');\n        rightSide.style.display = 'flex';\n        rightSide.style.alignItems = 'center';\n        rightSide.style.margin = '0 1rem';\n        rightSide.id = 'tiny_cursive-fullpage-right-wrapper';\n\n        rightSide.appendChild(btn);\n        leftSide.appendChild(assignName.cloneNode(true));\n\n\n        header.appendChild(leftSide);\n        header.appendChild(rightSide);\n\n        p4.insertBefore(header, p4.firstChild);\n        p2.style.backgroundColor = '#efefef';\n        current.style.width = '750px';\n        current.style.minWidth = '750px';\n        current.style.boxShadow = '0 10px 15px -3px rgb(0 0 0/0.1),0 4px 6px -4px rgb(0 0 0/0.1)';\n        Object.assign(p1.style, {\n            display: 'flex',\n            justifyContent: 'center',\n            outline: 'none',\n            margin: '2rem 0 0'\n        });\n        const style = this.create('style');\n        style.id = 'tiny_cursive-fullpage-mode-style';\n        style.textContent = `\n            .tox.tox-edit-focus .tox-edit-area::before {\n                opacity: 0;\n            }\n            `;\n        document.head.appendChild(style);\n\n        let iframeBody = current.contentDocument?.body || current.contentWindow?.document?.body;\n\n        if (iframeBody) {\n            iframeBody.style.padding = '0.5in';\n        }\n        p2.style.position = 'relative';\n        document.getElementById('cursive-fullpagemode-sidebar')?.remove();\n\n        let toggle = this.create('div');\n        toggle.id = 'cursive-fullpagemode-sidebar-toggle';\n        toggle.innerHTML = Icons.hamburger;\n        p2.appendChild(toggle);\n        p2.appendChild(this.docSideBar(statusBar));\n    }\n\n    normalizePage(editorId) {\n        document.getElementById('tiny_cursive-fullpage-custom-header')?.remove();\n        document.getElementById('cursive-fullpagemode-sidebar')?.remove();\n\n        let current = document.getElementById(editorId);\n        let p1 = current.parentElement;\n        let p2 = p1.parentElement;\n\n        p2.style.backgroundColor = '';\n        current.style.width = '';\n        current.style.minWidth = '';\n        current.style.boxShadow = '';\n        Object.assign(p1.style, {\n            display: '',\n            justifyContent: '',\n            outline: '',\n            margin: ''\n        });\n        p1.classList.remove('tiny-cursive-editor-container');\n        p2.style.position = '';\n        let iframeBody = current.contentDocument?.body || current.contentWindow?.document?.body;\n        if (iframeBody) {\n            iframeBody.style.padding = '0';\n        }\n        document.head.querySelector('#tiny_cursive-fullpage-mode-style')?.remove();\n    }\n\n    checkForumSubject() {\n        const form = document.querySelector('#tiny_cursive-fullpage-right-wrapper > input');\n        const msg = 'Subject or message cannot be empty.';\n\n        if (form) {\n            form.addEventListener('click', (e) => {\n                const subjectInput = document.getElementById('id_subject');\n                let content = this.editor.getContent().trim();\n                if (!subjectInput || subjectInput.value.trim() === '' || content === '') {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    this.editor.windowManager.alert(msg);\n                }\n            });\n        }\n    }\n\n    getSidebarTitle() {\n        switch (this.module) {\n            case 'assign':\n                return { title: 'Assignment', icon: Icons.assignment };\n            case 'forum':\n                return { title: 'Discussion', icon: Icons.forum };\n            case 'lesson':\n                return { title: 'Lesson', icon: Icons.forum };\n            case 'quiz':\n                return { title: 'Quiz', icon: Icons.quiz };\n            case 'oublog':\n                return { title: 'Blog', icon: Icons.quiz };\n            default:\n                return { title: 'Page', icon: Icons.quiz };\n        }\n    }\n\n    getTimerBlock(module) {\n        switch (module) {\n            case 'assign':\n                return document.querySelector('#mod_assign_timelimit_block > div > div');\n            case 'forum':\n                return document.querySelector('#mod_forum_timelimit_block');\n            case 'lesson':\n                return document.querySelector('#lesson-timer');\n            case 'quiz':\n                return document.querySelector('#quiz-time-left');\n            case 'oublog':\n                return document.querySelector('#mod_oublog_timelimit_block');\n            default:\n                return null;\n        }\n    }\n\n    getQuestionId(editoId) {\n        try {\n            if (!editoId || typeof editoId !== 'string') {\n                return '';\n            }\n            return editoId.replace(/^q(\\d+):(\\d+)_.*$/, \"$1-$2\");\n        } catch (error) {\n            window.console.error('Error getting question ID:', error);\n            return '';\n        }\n    }\n\n\n    create(tag) {\n        return document.createElement(tag);\n    }\n\n}"],"names":["constructor","User","Rubrics","submission","modulename","editor","quizInfo","module","moduleIcon","Icons","assignment","normalMode","id","this","normalizePage","fullPageMode","fullPageModule","_this$editor2","forum","_this$editor3","_this$editor4","quiz","_this$editor5","lesson","_this$editor6","_this$editor7","docSideBar","status","replyId","URL","window","location","href","searchParams","get","toggle","document","querySelector","timelimitBlock","getTimerBlock","headerInfo","getSidebarTitle","progressBar","container","create","className","style","width","overflow","crossBtn","innerHTML","close","addEventListener","transition","display","btnWrapper","padding","position","top","backgroundColor","append","header","headerTitle","textContent","title","fontWeight","prepend","cloneNode","wordCount","wordCounter","timer","timerCountDown","content","openDate","courseName","courseDes","Dates","dueDate","checkForumSubject","createBox","bg","titleColor","icon","people","bodyHTML","generateStudentInfo","trim","replyPost","_this$editor8","questionId","getQuestionId","_this$editor9","question","intro","atob","Number","open","time","generateImportantDates","Object","keys","length","generateRubrics","submissionStatus","box","heading","body","wrapper","forEach","rubric","rubricDiv","description","appendChild","values","levels","level","levelDiv","score","definition","statusWrapper","statusName","statusValue","isNew","current","modifiedWrapper","modifiedName","modifiedValue","_submission$current2","timemodified","date","Date","formatDate","gradeWrapper","gradeName","gradeValue","grade","labelDiv","label","value","fontSize","MutationObserver","newText","replace","observe","characterData","subtree","childList","warningDiv","clone","remove","notificationManager","text","type","timerCount","user","course","nameWrapper","usernameWrapper","courseWrapper","nameLabel","nameValue","usernameLabel","usernameValue","courseLabel","courseValue","fullname","username","due","openedWrapper","dueWrapper","remainingWrapper","openedLabel","openedValue","dueLabel","dueValue","remainingLabel","remainingValue","extractDate","calculateDate","toLocaleString","year","month","day","hour","minute","hour12","parts","split","slice","join","diffMs","Math","floor","getElementById","p1","parentElement","p2","p4","statusBar","assignName","classList","justifyContent","btn","margin","leftSide","alignItems","rightSide","insertBefore","firstChild","minWidth","boxShadow","assign","outline","head","iframeBody","contentDocument","contentWindow","_current$contentWindo","_current$contentWindo2","hamburger","editorId","_current$contentWindo3","_current$contentWindo4","form","e","subjectInput","getContent","preventDefault","stopPropagation","windowManager","alert","editoId","error","console","tag","createElement"],"mappings":"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"}