define("tiny_cursive/token_approve",["core/ajax","core/str"],(function(AJAX,str){var usersTable={init:function(page){str.get_strings([{key:"field_require",component:"tiny_cursive"}]).then((function(){usersTable.getToken(page),usersTable.generateToken()}))},getToken:function(){document.getElementById("approve_token").addEventListener("click",(function(){var token=document.getElementById("id_s_tiny_cursive_secretkey").value;AJAX.call([{methodname:"cursive_approve_token",args:{token:token}}])[0].done((function(json){var data=JSON.parse(json),message_alert="";message_alert=!0===data.status?"<span class='alert alert-success' role='alert'>"+data.message+"</span>":"<span class='alert alert-danger' role='alert'>"+data.message+"</span>",document.getElementById("token_message").innerHTML=message_alert}))}))},generateToken(){document.querySelector("#generate_cursivetoken").addEventListener("click",(function(e){e.preventDefault();const promise=AJAX.call([{methodname:"cursive_generate_webtoken",args:[]}])[0];promise.done((data=>{let message_alert="";data.token?(document.querySelector("#id_s_tiny_cursive_cursivetoken").value=data.token,message_alert="<span class='text-success' role='alert'>Webservice Token Generation Success</span>"):message_alert="<span class='text-danger' role='alert'>Webservice Token Generation Failed</span>";const alertContainer=document.querySelector("#cursivetoken_");alertContainer.innerHTML=message_alert,setTimeout((()=>{alertContainer.innerHTML=""}),3e3)})),promise.fail(((jqXHR,textStatus)=>{const errorMessage=`<span class='text-danger' role='alert'>An error occurred while generating the token: ${textStatus}</span>`,alertContainer=document.querySelector("#cursivetoken_");alertContainer.innerHTML=errorMessage,setTimeout((()=>{alertContainer.innerHTML=""}),3e3)}))}))}};return usersTable}));

//# sourceMappingURL=token_approve.min.js.map