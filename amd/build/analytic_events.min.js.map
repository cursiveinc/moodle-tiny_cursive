{"version":3,"file":"analytic_events.min.js","sources":["../src/analytic_events.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Module for handling analytics events in the Tiny Cursive plugin.\n * Provides functionality for displaying analytics data, replaying writing,\n * checking differences.\n *\n * @module     tiny_cursive/analytic_events\n * @copyright  2024 CTI <info@cursivetechnology.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport myModal from \"./analytic_modal\";\nimport { call as getContent } from \"core/ajax\";\nimport { get_string as getString } from 'core/str';\nimport { get_strings as getStrings } from 'core/str';\n\nexport default class AnalyticEvents {\n\n    constructor() {\n        getString('notenoughtinfo', 'tiny_cursive').then(str => {\n            localStorage.setItem('notenoughtinfo', str);\n            return str;\n        });\n    }\n\n    createModal(userid, context, questionid = '', replayInstances = null, authIcon) {\n        const element = document.getElementById('analytics' + userid + questionid);\n        if (element) {\n            element.addEventListener('click', function (e) {\n                e.preventDefault();\n\n                myModal.create({ templateContext: context }).then(modal => {\n                    const content = document.querySelector('#content' + userid +\n                        ' .tiny_cursive_table tbody tr:first-child td:nth-child(2)');\n                    if (content) {\n                        content.innerHTML = authIcon.outerHTML;\n                    }\n                    modal.show();\n\n                    const moreBtn = document.querySelector('body #more' + userid + questionid);\n\n                    if (moreBtn) {\n                        document\n                            .querySelectorAll('.tiny_cursive-nav-tab .active')\n                            .forEach(el => el.classList.remove('active'));\n\n                        const analyticBtn = document.getElementById('analytic' + userid + questionid);\n                        const diffBtn = document.getElementById('diff' + userid + questionid);\n\n                        if (analyticBtn) {\n                            analyticBtn.disabled = true;\n                            analyticBtn.style.backgroundColor = 'rgba(168, 168, 168, 0.133)';\n                            analyticBtn.style.cursor = 'not-allowed';\n                        }\n\n                        if (diffBtn) {\n                            diffBtn.disabled = true;\n                            diffBtn.style.backgroundColor = 'rgba(168, 168, 168, 0.133)';\n                            diffBtn.style.cursor = 'not-allowed';\n                        }\n\n                        moreBtn.addEventListener('click', function () {\n                            document\n                                .querySelectorAll('.tiny_cursive-nav-tab .active')\n                                .forEach(el => el.classList.remove('active'));\n\n                            this.classList.add('active');\n\n                            const repBtn = document.getElementById('rep' + userid + questionid);\n                            if (repBtn) {\n                                repBtn.disabled = false;\n                            }\n                            if (replayInstances && replayInstances[userid]) {\n                                replayInstances[userid].stopReplay();\n                            }\n                        });\n                    }\n\n                }).catch(error => {\n                    window.console.error(\"Failed to create modal:\", error);\n                });\n            });\n        }\n    }\n\n    analytics(userid, templates, context, questionid = '', replayInstances = null, authIcon) {\n        document.body.addEventListener('click', function (e) {\n            if (e.target && e.target.id === 'analytic' + userid + questionid) {\n                e.preventDefault();\n\n                if (e.target.disabled) {\n                    return;\n                }\n\n                const repBtn = document.getElementById('rep' + userid + questionid);\n                if (repBtn) {\n                    repBtn.disabled = false;\n                }\n\n                const qualityBtn = document.getElementById('quality' + userid + questionid);\n                if (qualityBtn) {\n                    qualityBtn.disabled = false;\n                }\n\n                const content = document.getElementById('content' + userid);\n                if (content) {\n                    content.setAttribute('data-label', 'analytics');\n                    content.classList.remove('tiny_cursive_outputElement');\n                    content.classList.add('tiny_cursive');\n                    content.setAttribute('data-label', 'analytics');\n\n                    const player = document.getElementById('player_' + userid + questionid);\n                    if (player) {\n                        player.style.display = 'none';\n                    }\n\n                    content.innerHTML = '';\n                    const loaderDiv = document.createElement('div');\n                    loaderDiv.className = 'd-flex justify-content-center my-5';\n                    const loader = document.createElement('div');\n                    loader.className = 'tiny_cursive-loader';\n                    loaderDiv.appendChild(loader);\n                    content.appendChild(loaderDiv);\n                }\n\n                if (replayInstances && replayInstances[userid]) {\n                    replayInstances[userid].stopReplay();\n                }\n\n                document.querySelectorAll('.tiny_cursive-nav-tab .active').forEach(el => el.classList.remove('active'));\n                e.target.classList.add('active');\n\n                templates.render('tiny_cursive/analytics_table', context).then(function (html) {\n                    const content = document.getElementById('content' + userid);\n                    if (content) {\n                        content.innerHTML = html;\n                    }\n                    const table = document.querySelector('#content' + userid + ' .tiny_cursive_table');\n                    const firstRow = table.querySelector('tbody tr:first-child');\n                    const firstCell = firstRow.querySelector('td:nth-child(2)');\n\n                    if (firstCell) {\n                        firstCell.innerHTML = authIcon.outerHTML;\n                    }\n                    return true;\n                }).catch(function (error) {\n                    window.console.error(\"Failed to render template:\", error);\n                });\n            }\n        });\n    }\n\n    checkDiff(userid, fileid, questionid = '', replayInstances = null) {\n        const nodata = document.createElement('p');\n        nodata.classList.add('tiny_cursive_nopayload', 'bg-light');\n\n        getString('nopaylod', 'tiny_cursive').then(str => {\n            nodata.textContent = str;\n            return true;\n        }).catch(error => window.console.log(error));\n\n        document.body.addEventListener('click', function (e) {\n            if (e.target && e.target.id === 'diff' + userid + questionid) {\n                e.preventDefault();\n\n            if (e.target.disabled) {\n                return;\n            }\n\n                // Enable rep and quality elements\n                const repElement = document.getElementById('rep' + userid + questionid);\n                if (repElement) {\n                    repElement.disabled = false;\n                }\n\n                const qualityElement = document.getElementById('quality' + userid + questionid);\n                if (qualityElement) {\n                    qualityElement.disabled = false;\n                }\n\n                // Update content element attributes and classes\n                const content = document.getElementById('content' + userid);\n                if (content) {\n                    content.setAttribute('data-label', 'diff');\n                    content.classList.remove('tiny_cursive_outputElement');\n                    content.classList.add('tiny_cursive');\n                    content.innerHTML = '';\n                    const loaderDiv = document.createElement('div');\n                    loaderDiv.className = 'd-flex justify-content-center my-5';\n                    const loader = document.createElement('div');\n                    loader.className = 'tiny_cursive-loader';\n                    loaderDiv.appendChild(loader);\n                    content.appendChild(loaderDiv);\n                }\n\n                // Hide player element\n                const player = document.getElementById('player_' + userid + questionid);\n                if (player) {\n                    player.style.display = 'none';\n                }\n\n                // Update active tab\n                document.querySelectorAll('.tiny_cursive-nav-tab .active').forEach(el => el.classList.remove('active'));\n                e.target.classList.add('active');\n\n                // Stop replay if applicable\n                if (replayInstances && replayInstances[userid]) {\n                    replayInstances[userid].stopReplay();\n                }\n\n                // Check for missing fileid\n                if (!fileid) {\n                    if (content) {\n                        content.innerHTML = '';\n                        content.appendChild(nodata);\n                    }\n                    throw new Error('Missing file id or Difference Content not received yet');\n                }\n\n                // Fetch content\n                getContent([{\n                    methodname: 'cursive_get_writing_differences',\n                    args: { fileid: fileid },\n                }])[0].then(response => {\n                    let responsedata = JSON.parse(response.data);\n                    if (responsedata) {\n                        let submittedText = atob(responsedata.submitted_text);\n\n                        // Fetch dynamic strings\n                        getStrings([\n                            { key: 'original_text', component: 'tiny_cursive' },\n                            { key: 'editspastesai', component: 'tiny_cursive' }\n                        ]).then(strings => {\n                            const originalTextString = strings[0];\n                            const editsPastesAIString = strings[1];\n\n                            // Create comment box\n                            const commentBox = document.createElement('div');\n                            commentBox.className = 'p-2 border rounded mb-2';\n\n                            // Paste count\n                            const pasteCountDiv = document.createElement('div');\n                            getString('pastecount', 'tiny_cursive').then(str => {\n                                pasteCountDiv.innerHTML = `<div><strong>${str} :</strong> ${responsedata.commentscount}</div>`;\n                                return true;\n                            }).catch(error => window.console.log(error));\n\n                            // Comments header\n                            const commentsDiv = document.createElement('div');\n                            commentsDiv.className = 'border-bottom';\n                            getString('comments', 'tiny_cursive').then(str => {\n                                commentsDiv.innerHTML = `<strong>${str}</strong>`;\n                                return true;\n                            }).catch(error => window.console.error(error));\n\n                            // Comments list\n                            const commentsList = document.createElement('div');\n                            const comments = responsedata.comments;\n                            for (let index in comments) {\n                                const commentDiv = document.createElement('div');\n                                commentDiv.style.cssText = 'word-wrap: break-word; word-break: break-word';\n                                commentDiv.className = 'shadow-sm p-1 my-1';\n                                commentDiv.textContent = comments[index].usercomment;\n                                commentsList.appendChild(commentDiv);\n                            }\n\n                            commentBox.appendChild(pasteCountDiv);\n                            commentBox.appendChild(commentsDiv);\n                            commentBox.appendChild(commentsList);\n\n                            // Create legend\n                            const legend = document.createElement('div');\n                            legend.className = 'd-flex p-2 border rounded mb-2';\n\n                            // First legend item\n                            const attributedItem = document.createElement('div');\n                            attributedItem.className = 'tiny_cursive-legend-item';\n                            const attributedBox = document.createElement('div');\n                            attributedBox.className = 'tiny_cursive-box attributed';\n                            const attributedText = document.createElement('span');\n                            attributedText.textContent = originalTextString;\n                            attributedItem.appendChild(attributedBox);\n                            attributedItem.appendChild(attributedText);\n\n                            // Second legend item\n                            const unattributedItem = document.createElement('div');\n                            unattributedItem.className = 'tiny_cursive-legend-item';\n                            const unattributedBox = document.createElement('div');\n                            unattributedBox.className = 'tiny_cursive-box tiny_cursive_added';\n                            const unattributedText = document.createElement('span');\n                            unattributedText.textContent = editsPastesAIString;\n                            unattributedItem.appendChild(unattributedBox);\n                            unattributedItem.appendChild(unattributedText);\n\n                            legend.appendChild(attributedItem);\n                            legend.appendChild(unattributedItem);\n\n                            // Create content block\n                            const contents = document.createElement('div');\n                            contents.className = 'tiny_cursive-comparison-content';\n                            const textBlock2 = document.createElement('div');\n                            textBlock2.className = 'tiny_cursive-text-block';\n                            const reconstructedText = document.createElement('div');\n                            reconstructedText.id = 'tiny_cursive-reconstructed_text';\n                            reconstructedText.innerHTML = JSON.parse(submittedText);\n                            textBlock2.appendChild(reconstructedText);\n\n                            contents.appendChild(commentBox);\n                            contents.appendChild(legend);\n                            contents.appendChild(textBlock2);\n\n                            if (content) {\n                                content.innerHTML = '';\n                                content.appendChild(contents);\n                            }\n                        }).catch(error => {\n                            window.console.error(\"Failed to load language strings:\", error);\n                            if (content) {\n                                content.innerHTML = '';\n                                content.appendChild(nodata);\n                            }\n                        });\n                    } else {\n                        if (content) {\n                            content.innerHTML = '';\n                            content.appendChild(nodata);\n                        }\n                    }\n                }).catch(error => {\n                    if (content) {\n                        content.innerHTML = '';\n                        content.appendChild(nodata);\n                    }\n                    throw new Error('Error loading JSON file: ' + error.message);\n                });\n            }\n        });\n    }\n\n    replyWriting(userid, filepath, questionid = '', replayInstances = null) {\n        document.body.addEventListener('click', function (e) {\n          if (e.target && e.target.id === 'rep' + userid + questionid) {\n            e.preventDefault();\n\n            const replyBtn = document.getElementById('rep' + userid + questionid);\n            const qualityBtn = document.getElementById('quality' + userid + questionid);\n            const content = document.getElementById('content' + userid);\n            const player = document.getElementById('player_' + userid + questionid);\n            const replayControls = document.getElementById('replayControls_' + userid + questionid);\n\n            if (filepath) {\n              if (replayControls) {\n                replayControls.classList.remove('d-none');\n              }\n              if (content) {\n                content.classList.add('tiny_cursive_outputElement');\n              }\n            }\n\n            if (replyBtn) {\n                replyBtn.disabled = true;\n            }\n            if (qualityBtn) {\n                qualityBtn.disabled = false;\n            }\n\n            if (content) {\n                content.dataset.label = 'replay';\n            }\n            if (player) {\n              player.style.display = 'block';\n              player.style.paddingRight = '8px';\n            }\n\n            if (content) {\n              content.innerHTML = `\n                <div class=\"d-flex justify-content-center my-5\">\n                  <div class=\"tiny_cursive-loader\"></div>\n                </div>`;\n            }\n\n            document\n              .querySelectorAll('.tiny_cursive-nav-tab .active')\n              .forEach(el => el.classList.remove('active'));\n            e.target.classList.add('active');\n\n            if (replayInstances && replayInstances[userid]) {\n              replayInstances[userid].stopReplay();\n            }\n\n            if (questionid) {\n              // eslint-disable-next-line\n              video_playback(userid, filepath, questionid);\n            } else {\n              // eslint-disable-next-line\n              video_playback(userid, filepath);\n            }\n          }\n        });\n      }\n\n\n    formatedTime(data) {\n        if (data.total_time_seconds) {\n            let totalTimeSeconds = data.total_time_seconds;\n            let hours = Math.floor(totalTimeSeconds / 3600).toString().padStart(2, 0);\n            let minutes = Math.floor((totalTimeSeconds % 3600) / 60).toString().padStart(2, 0);\n            let seconds = (totalTimeSeconds % 60).toString().padStart(2, 0);\n            return `${hours}h ${minutes}m ${seconds}s`;\n        } else {\n            return \"0h 0m 0s\";\n        }\n    }\n\n    authorshipStatus(firstFile, score, scoreSetting) {\n        var icon = 'fa fa-circle-o';\n        var color = 'font-size:32px;color:black';\n        score = parseFloat(score);\n\n        if (firstFile) {\n            icon = 'fa fa-solid fa-info-circle';\n            color = 'font-size:32px;color:#000000';\n        } else if (score >= scoreSetting) {\n            icon = 'fa fa-check-circle';\n            color = 'font-size:32px;color:green';\n        }\n\n        const iconElement = document.createElement('i');\n        iconElement.className = icon;\n        iconElement.style = color;\n\n        if (score < scoreSetting) {\n            iconElement.className = 'fa fa-question-circle';\n            iconElement.style = 'font-size:32px;color:#A9A9A9';\n            iconElement.setAttribute('title', localStorage.getItem('notenoughtinfo'));\n        }\n\n        return iconElement;\n    }\n}\n"],"names":["constructor","then","str","localStorage","setItem","createModal","userid","context","questionid","replayInstances","authIcon","element","document","getElementById","addEventListener","e","preventDefault","create","templateContext","modal","content","querySelector","innerHTML","outerHTML","show","moreBtn","querySelectorAll","forEach","el","classList","remove","analyticBtn","diffBtn","disabled","style","backgroundColor","cursor","add","repBtn","stopReplay","catch","error","window","console","analytics","templates","body","target","id","qualityBtn","setAttribute","player","display","loaderDiv","createElement","className","loader","appendChild","render","html","firstCell","checkDiff","fileid","nodata","textContent","log","repElement","qualityElement","Error","methodname","args","response","responsedata","JSON","parse","data","submittedText","atob","submitted_text","key","component","strings","originalTextString","editsPastesAIString","commentBox","pasteCountDiv","commentscount","commentsDiv","commentsList","comments","index","commentDiv","cssText","usercomment","legend","attributedItem","attributedBox","attributedText","unattributedItem","unattributedBox","unattributedText","contents","textBlock2","reconstructedText","message","replyWriting","filepath","replyBtn","replayControls","dataset","label","paddingRight","video_playback","formatedTime","total_time_seconds","totalTimeSeconds","hours","Math","floor","toString","padStart","minutes","seconds","authorshipStatus","firstFile","score","scoreSetting","icon","color","parseFloat","iconElement","getItem"],"mappings":"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"}