{"version":3,"file":"analytic_events.min.js","sources":["../src/analytic_events.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Module for handling analytics events in the Tiny Cursive plugin.\r\n * Provides functionality for displaying analytics data, replaying writing,\r\n * checking differences and showing quality metrics.\r\n *\r\n * @module     tiny_cursive/analytic_events\r\n * @copyright  2024 CTI <info@cursivetechnology.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\nimport myModal from \"./analytic_modal\";\r\nimport {call as getContent} from \"core/ajax\";\r\nimport $ from 'jquery';\r\nimport {get_string as getString} from 'core/str';\r\nimport {get_strings as getStrings} from 'core/str';\r\nimport template from 'core/templates';\r\n\r\nexport default class AnalyticEvents {\r\n\r\n    constructor() {\r\n        getString('notenoughtinfo', 'tiny_cursive').then(str => {\r\n            localStorage.setItem('notenoughtinfo', str);\r\n            return str;\r\n        }).catch(error => window.console.log(error));\r\n    }\r\n\r\n    createModal(userid, context, questionid = '', replayInstances = null, authIcon) {\r\n        const self = this;\r\n        $('#analytics' + userid + questionid).on('click', function(e) {\r\n            e.preventDefault();\r\n\r\n            const isReplayButton = $(this).find('.tiny_cursive-replay-button').length > 0;\r\n            // Create Moodle modal\r\n            myModal.create({templateContext: context}).then(modal => {\r\n                $('#content' + userid + ' .tiny_cursive_table  tbody tr:first-child td:nth-child(2)').html(authIcon);\r\n                modal.show();\r\n\r\n                if (isReplayButton) {\r\n                    setTimeout(() => {\r\n                        $('.tiny_cursive-nav-tab').find('.active').removeClass('active');\r\n\r\n                        const replayTab = $('#rep' + userid + questionid);\r\n                        if (replayTab.length) {\r\n                            replayTab.trigger('click');\r\n                            replayTab.addClass('active');\r\n                        }\r\n                    }, 50);\r\n                }\r\n\r\n                let moreBtn = $('body #more' + userid + questionid);\r\n                if (moreBtn.length > 0) {\r\n                    $('.tiny_cursive-nav-tab').find('.active').removeClass('active');\r\n                    $('#analytic' + userid + questionid).prop('disabled', true);\r\n                    $('#diff' + userid + questionid).prop('disabled', true);\r\n                    $('#analytic' + userid + questionid).css({\r\n                            'background-color': 'rgba(168, 168, 168, 0.133)',\r\n                            'cursor': 'not-allowed'\r\n                        });\r\n                    $('#diff' + userid + questionid).css({\r\n                            'background-color': 'rgba(168, 168, 168, 0.133)',\r\n                            'cursor': 'not-allowed'\r\n                    });\r\n                    moreBtn.on('click', function(e) {\r\n                        e.preventDefault();\r\n                        self.learnMore($(this), context, userid, questionid, replayInstances);\r\n                    });\r\n                }\r\n\r\n                return true;\r\n            }).catch(error => {\r\n                window.console.error(\"Failed to create modal:\", error);\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n    analytics(userid, templates, context, questionid = '', replayInstances = null, authIcon) {\r\n\r\n        $('body').on('click', '#analytic' + userid + questionid, function(e) {\r\n            $('#rep' + userid + questionid).prop('disabled', false);\r\n            $('#quality' + userid + questionid).prop('disabled', false);\r\n            $('#content' + userid).attr('data-label', 'analytics');\r\n            $('#player_' + userid + questionid).css({'display': 'none'});\r\n            $('#content' + userid).removeClass('tiny_cursive_outputElement')\r\n                                  .addClass('tiny_cursive').attr('data-label', 'analytics');\r\n            e.preventDefault();\r\n            $('#content' + userid).html($('<div>').addClass('d-flex justify-content-center my-5')\r\n                .append($('<div>').addClass('tiny_cursive-loader')));\r\n            if (replayInstances && replayInstances[userid]) {\r\n                replayInstances[userid].stopReplay();\r\n            }\r\n            $('.tiny_cursive-nav-tab').find('.active').removeClass('active');\r\n            $(this).addClass('active'); // Add 'active' class to the clicked element\r\n\r\n            templates.render('tiny_cursive/analytics_table', context).then(function(html) {\r\n                $('#content' + userid).html(html);\r\n                $('#content' + userid + ' .tiny_cursive_table  tbody tr:first-child td:nth-child(2)').html(authIcon);\r\n                return true;\r\n            }).fail(function(error) {\r\n                window.console.error(\"Failed to render template:\", error);\r\n            });\r\n        });\r\n    }\r\n\r\n    checkDiff(userid, fileid, questionid = '', replayInstances = null) {\r\n        const nodata = document.createElement('p');\r\n        nodata.classList.add('tiny_cursive_nopayload', 'bg-light');\r\n        getString('nopaylod', 'tiny_cursive').then(str => {\r\n            nodata.textContent = str;\r\n            return true;\r\n        }).catch(error => window.console.log(error));\r\n        $('body').on('click', '#diff' + userid + questionid, function(e) {\r\n            $('#rep' + userid + questionid).prop('disabled', false);\r\n            $('#quality' + userid + questionid).prop('disabled', false);\r\n            $('#content' + userid).attr('data-label', 'diff');\r\n            $('#player_' + userid + questionid).css({\r\n                'display': 'none'\r\n            });\r\n            $('#content' + userid).removeClass('tiny_cursive_outputElement').addClass('tiny_cursive').attr('data-label', 'diff');\r\n            e.preventDefault();\r\n            $('#content' + userid).html($('<div>').addClass('d-flex justify-content-center my-5')\r\n                .append($('<div>').addClass('tiny_cursive-loader')));\r\n            $('.tiny_cursive-nav-tab').find('.active').removeClass('active');\r\n            $(this).addClass('active');\r\n            if (replayInstances && replayInstances[userid]) {\r\n                replayInstances[userid].stopReplay();\r\n            }\r\n            if (!fileid) {\r\n                $('#content' + userid).html(nodata);\r\n                throw new Error('Missing file id or Difference Content not received yet');\r\n            }\r\n            getContent([{\r\n                methodname: 'cursive_get_writing_differences',\r\n                args: {fileid: fileid},\r\n            }])[0].done(response => {\r\n                let responsedata = JSON.parse(response.data);\r\n                if (responsedata) {\r\n                    let submittedText = atob(responsedata.submitted_text);\r\n\r\n                    // Fetch the dynamic strings.\r\n                    getStrings([\r\n                        {key: 'original_text', component: 'tiny_cursive'},\r\n                        {key: 'editspastesai', component: 'tiny_cursive'}\r\n                    ]).done(strings => {\r\n                        const originalTextString = strings[0];\r\n                        const editsPastesAIString = strings[1];\r\n\r\n                        const commentBox = $('<div class=\"p-2 border rounded mb-2\">');\r\n                        var pasteCountDiv = $('<div></div>');\r\n                        getString('pastecount', 'tiny_cursive').then(str => {\r\n                            pasteCountDiv.append('<div><strong>' + str + ' :</strong> ' + responsedata.commentscount + '</div>');\r\n                            return true;\r\n                        }).catch(error => window.console.log(error));\r\n\r\n                        var commentsDiv = $('<div class=\"border-bottom\"></div>');\r\n                        getString('comments', 'tiny_cursive').then(str => {\r\n                            commentsDiv.append('<strong>' + str + '</strong>');\r\n                            return true;\r\n                        }).catch(error => window.console.error(error));\r\n\r\n                        var commentsList = $('<div></div>');\r\n\r\n                        let comments = responsedata.comments;\r\n                        for (let index in comments) {\r\n                            var commentDiv = $(`<div style=\"word-wrap: break-word; word-break: break-word\"\r\n                                class=\"shadow-sm p-1 my-1\"></div>`).text(comments[index].usercomment);\r\n                            commentsList.append(commentDiv);\r\n                        }\r\n                        commentBox.append(pasteCountDiv).append(commentsDiv).append(commentsList);\r\n\r\n                        const $legend = $('<div class=\"d-flex p-2 border rounded mb-2\">');\r\n\r\n                        // Create the first legend item\r\n                        const $attributedItem = $('<div>', {\"class\": \"tiny_cursive-legend-item\"});\r\n                        const $attributedBox = $('<div>', {\"class\": \"tiny_cursive-box attributed\"});\r\n                        const $attributedText = $('<span>').text(originalTextString);\r\n                        $attributedItem.append($attributedBox).append($attributedText);\r\n\r\n                        // Create the second legend item\r\n                        const $unattributedItem = $('<div>', {\"class\": 'tiny_cursive-legend-item'});\r\n                        const $unattributedBox = $('<div>', {\"class\": 'tiny_cursive-box tiny_cursive_added'});\r\n                        const $unattributedText = $('<span>').text(editsPastesAIString);\r\n                        $unattributedItem.append($unattributedBox).append($unattributedText);\r\n\r\n                        // Append the legend items to the legend container.\r\n                        $legend.append($attributedItem).append($unattributedItem);\r\n\r\n                        let contents = $('<div>').addClass('tiny_cursive-comparison-content');\r\n                        let textBlock2 = $('<div>').addClass('tiny_cursive-text-block').append(\r\n                            $('<div>').attr('id', 'tiny_cursive-reconstructed_text').html(JSON.parse(submittedText))\r\n                        );\r\n\r\n                        contents.append(commentBox, $legend, textBlock2);\r\n                        $('#content' + userid).html(contents); // Update content.\r\n                    }).fail(error => {\r\n                        window.console.error(\"Failed to load language strings:\", error);\r\n                        $('#content' + userid).html(nodata);\r\n                    });\r\n                } else {\r\n                    $('#content' + userid).html(nodata);\r\n                }\r\n            }).fail(error => {\r\n                $('#content' + userid).html(nodata);\r\n                throw new Error('Error loading JSON file: ' + error.message);\r\n            });\r\n        });\r\n    }\r\n\r\n    replyWriting(userid, filepath, questionid = '', replayInstances = null) {\r\n        $('body').on('click', '#rep' + userid + questionid, function(e) {\r\n\r\n            if (filepath) {\r\n                $('#replayControls_' + userid + questionid).removeClass('d-none');\r\n                $('#content' + userid).addClass('tiny_cursive_outputElement');\r\n            }\r\n\r\n            $(this).prop('disabled', true);\r\n            $('#quality' + userid + questionid).prop('disabled', false);\r\n            $('#content' + userid).attr('data-label', 'replay');\r\n            $('#player_' + userid + questionid).css({\r\n                'display': 'block',\r\n                'padding-right': '8px'\r\n            });\r\n            e.preventDefault();\r\n            $('#content' + userid).html($('<div>').addClass('d-flex justify-content-center my-5')\r\n                .append($('<div>').addClass('tiny_cursive-loader')));\r\n            $('.tiny_cursive-nav-tab').find('.active').removeClass('active');\r\n            $(this).addClass('active'); // Add 'active' class to the clicked element\r\n            if (replayInstances && replayInstances[userid]) {\r\n                replayInstances[userid].stopReplay();\r\n            }\r\n            if (questionid) {\r\n                // eslint-disable-next-line\r\n                video_playback(userid, filepath, questionid);\r\n            } else {\r\n                // eslint-disable-next-line\r\n                video_playback(userid, filepath);\r\n            }\r\n        });\r\n    }\r\n\r\n    learnMore(moreBtn, context, userid, questionid, replayInstances) {\r\n        $('.tiny_cursive-nav-tab').find('.active').removeClass('active');\r\n        moreBtn.addClass('active');\r\n        $('#rep' + userid + questionid).prop('disabled', false);\r\n        if (replayInstances && replayInstances[userid]) {\r\n            replayInstances[userid].stopReplay();\r\n        }\r\n        $('#content' + userid + questionid).removeClass('tiny_cursive_outputElement');\r\n        $('#replayControls_' + userid + questionid).addClass('d-none');\r\n        template.render('tiny_cursive/learn_more', context).then(function(html) {\r\n            $('#content' + userid + questionid).html(html);\r\n            return true;\r\n        }).fail(function(error) {\r\n            window.console.error(\"Failed to render template:\", error);\r\n        });\r\n    }\r\n\r\n    formatedTime(data) {\r\n        if (data.total_time_seconds) {\r\n            let totalTimeSeconds = data.total_time_seconds;\r\n            let hours = Math.floor(totalTimeSeconds / 3600).toString().padStart(2, 0);\r\n            let minutes = Math.floor((totalTimeSeconds % 3600) / 60).toString().padStart(2, 0);\r\n            let seconds = (totalTimeSeconds % 60).toString().padStart(2, 0);\r\n            return `${hours}h ${minutes}m ${seconds}s`;\r\n        } else {\r\n            return \"0h 0m 0s\";\r\n        }\r\n    }\r\n\r\n    authorshipStatus(firstFile, score, scoreSetting) {\r\n        var icon = 'fa fa-circle-o';\r\n        var color = 'font-size:32px;color:black';\r\n        score = parseFloat(score);\r\n\r\n        if (firstFile) {\r\n            icon = 'fa fa-solid fa-info-circle';\r\n            color = 'font-size:32px;color:#000000';\r\n        } else if (score >= scoreSetting) {\r\n            icon = 'fa fa-check-circle';\r\n            color = 'font-size:32px;color:green';\r\n        }\r\n        if (score < scoreSetting) {\r\n            icon = 'fa fa-question-circle';\r\n            color = 'font-size:32px;color:#A9A9A9';\r\n            return $('<i>').addClass(icon).attr('style', color).attr('title', localStorage.getItem('notenoughtinfo'));\r\n        } else {\r\n            return $('<i>').addClass(icon).attr('style', color);\r\n        }\r\n\r\n    }\r\n}\r\n"],"names":["constructor","then","str","localStorage","setItem","catch","error","window","console","log","createModal","userid","context","questionid","replayInstances","authIcon","self","this","on","e","preventDefault","isReplayButton","find","length","create","templateContext","modal","html","show","setTimeout","removeClass","replayTab","trigger","addClass","moreBtn","prop","css","learnMore","analytics","templates","attr","append","stopReplay","render","fail","checkDiff","fileid","nodata","document","createElement","classList","add","textContent","Error","methodname","args","done","response","responsedata","JSON","parse","data","submittedText","atob","submitted_text","key","component","strings","originalTextString","editsPastesAIString","commentBox","pasteCountDiv","commentscount","commentsDiv","commentsList","comments","index","commentDiv","text","usercomment","$legend","$attributedItem","$attributedBox","$attributedText","$unattributedItem","$unattributedBox","$unattributedText","contents","textBlock2","message","replyWriting","filepath","video_playback","formatedTime","total_time_seconds","totalTimeSeconds","Math","floor","toString","padStart","authorshipStatus","firstFile","score","scoreSetting","icon","color","parseFloat","getItem"],"mappings":"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"}